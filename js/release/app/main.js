//>>built
require({cache:{"app/views/GeoJSON":function(){define("app/views/GeoJSON",["dojo/_base/declare"],function(m){return m("app.views.GeoJSON",null,{geojson:null,options:null,constructor:function(k,f){this.geojson=k;this.options=f||{}},parse:function(){var k;switch(this.geojson.type){case "FeatureCollection":if(this.geojson.features){k=[];for(var f=0;f<this.geojson.features.length;f++)k.push(this._geometryToGoogleMaps(this.geojson.features[f],this.options))}else k=this._error('Invalid GeoJSON object: FeatureCollection object missing "features" member.');
break;case "GeometryCollection":if(this.geojson.geometries){k=[];for(f=0;f<this.geojson.geometries.length;f++)k.push(this._geometryToGoogleMaps(this.geojson.geometries[f],this.options))}else k=this._error('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;case "Feature":k=!this.geojson.properties||!this.geojson.geometry?this._error('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.'):this._geometryToGoogleMaps(this.geojson,this.options);
break;case "POINT":case "MULTIPOINT":case "LINESTRING":case "MULTILINESTRING":case "POLYGON":case "MULTIPOLYGON":k=this.geojson.coordinates?k=this._geometryToGoogleMaps(this.geojson,this.options):this._error('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:k=this._error('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString", "Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return k},_geometryToGoogleMaps:function(k,
f){var j=k.geometry,e=k.properties,h;switch(j.type){case "POINT":f.position=new google.maps.LatLng(j.coordinates[1],j.coordinates[0]);f.title=e.name;h=new google.maps.Marker(f);h.set("id",k.id);e&&h.set("geojsonProperties",e);break;case "MULTIPOINT":h=[];for(var l=0;l<j.coordinates.length;l++)f.position=new google.maps.LatLng(j.coordinates[l][1],j.coordinates[l][0]),h.push(new google.maps.Marker(f));if(e)for(var i=0;i<h.length;i++)h[i].set("geojsonProperties",e),h[i].set("id",k.id);break;case "LineString":for(var c=
[],l=0;l<j.coordinates.length;l++){var i=j.coordinates[l],b=new google.maps.LatLng(i[1],i[0]);c.push(b)}f.path=c;h=new google.maps.Polyline(f);e&&(h.set("geojsonProperties",e),h.set("id",k.id));break;case "MultiLineString":h=[];for(l=0;l<j.coordinates.length;l++){for(var c=[],a=0;a<j.coordinates[l].length;a++)i=j.coordinates[l][a],b=new google.maps.LatLng(i[1],i[0]),c.push(b);f.path=c;h.push(new google.maps.Polyline(f))}if(e)for(i=0;i<h.length;i++)h[i].set("geojsonProperties",e),h[i].set("id",k.id);
break;case "Polygon":for(var d=[],l=0;l<j.coordinates.length;l++){c=[];for(a=0;a<j.coordinates[l].length;a++)b=new google.maps.LatLng(j.coordinates[l][a][1],j.coordinates[l][a][0]),c.push(b);d.push(c)}f.paths=d;h=new google.maps.Polygon(f);e&&(h.set("geojsonProperties",e),h.set("id",k.id));break;case "MultiPolygon":h=[];for(l=0;l<j.coordinates.length;l++){d=[];for(a=0;a<j.coordinates[l].length;a++){c=[];for(i=0;i<j.coordinates[l][a].length;i++)b=new google.maps.LatLng(j.coordinates[l][a][i][1],j.coordinates[l][a][i][0]),
c.push(b);d.push(c)}f.paths=d;h.push(new google.maps.Polygon(f))}if(e)for(i=0;i<h.length;i++)h[i].set("geojsonProperties",e),h[i].set("id",k.id);break;case "GeometryCollection":h=[];if(j.geometries)for(l=0;l<j.geometries.length;l++)h.push(_geometryToGoogleMaps(j.geometries[l],f,e||null));else h=_error('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;default:h=_error('Invalid GeoJSON object: Geometry object must be one of "Point", "LineString", "Polygon" or "MultiPolygon".')}return h},
_error:function(k){return{type:"Error",message:k}}})})},"dojox/mobile/TransitionEvent":function(){define("dojox/mobile/TransitionEvent",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/on","./transition"],function(m,k,f,j,e){return m("dojox.mobile.TransitionEvent",null,{constructor:function(e,f,i){this.transitionOptions=f;this.target=e;this.triggerEvent=i||null},dispatch:function(){var h=j.emit(this.target,"startTransition",{bubbles:!0,cancelable:!0,detail:this.transitionOptions,
triggerEvent:this.triggerEvent});h&&k.when(e,f.hitch(this,function(e){k.when(e.call(this,h),f.hitch(this,function(e){this.endTransition(e)}))}))},endTransition:function(e){j.emit(this.target,"endTransition",{detail:e.transitionOptions})}})})},"dojox/mobile/ViewController":function(){define("dojox/mobile/ViewController",["dojo/_base/kernel","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/on","dojo/ready",
"dijit/registry","./ProgressIndicator","./TransitionEvent"],function(m,k,f,j,e,h,l,i,c,b,a,d,n,g){var o=e.getObject("dojox.mobile",!0),j=j("dojox.mobile.ViewController",null,{constructor:function(){this.viewMap={};this.defaultView=this.currentView=null;a(e.hitch(this,function(){b(h.body(),"startTransition",e.hitch(this,"onStartTransition"))}))},findCurrentView:function(g,a){if(g){var b=d.byId(g);if(b&&b.getShowingView)return b.getShowingView()}if(o.currentView)return o.currentView;for(b=a;;){b=b.getParent();
if(!b)return null;if(i.contains(b.domNode,"mblView"))break}return b},onStartTransition:function(a){a.preventDefault();if(a.detail&&(!a.detail||a.detail.moveTo||a.detail.href||a.detail.url||a.detail.scene)){var b=this.findCurrentView(a.detail.moveTo,a.target&&a.target.id?d.byId(a.target.id):d.byId(a.target));if(b&&(!a.detail||!(a.detail.moveTo&&b===d.byId(a.detail.moveTo))))if(a.detail.href){var c=d.byId(a.target.id).hrefTarget;c?o.openWindow(a.detail.href,c):b.performTransition(null,a.detail.transitionDir,
a.detail.transition,a.target,function(){location.href=a.detail.href})}else if(a.detail.scene)f.publish("/dojox/mobile/app/pushScene",[a.detail.scene]);else{var p=a.detail.moveTo;if(a.detail.url){if(o._viewMap&&o._viewMap[a.detail.url])c=o._viewMap[a.detail.url];else{var r=this._text;if(!r)if(d.byId(a.target.id).sync)m.xhrGet({url:a.detail.url,sync:!0,load:function(g){r=e.trim(g)}});else{require(["dojo/_base/xhr"],e.hitch(this,function(b){var o=n.getInstance();h.body().appendChild(o.domNode);o.start();
b=b.get({url:a.detail.url,handleAs:"text"});b.addCallback(e.hitch(this,function(b){o.stop();if(b)this._text=b,(new g(a.target,{transition:a.detail.transition,transitionDir:a.detail.transitionDir,moveTo:p,href:a.detail.href,url:a.detail.url,scene:a.detail.scene},a.detail)).dispatch()}));b.addErrback(function(g){o.stop();console.log("Failed to load "+a.detail.url+"\n"+(g.description||g))})}));return}this._text=null;c=this._parse(r,d.byId(a.target.id).urlTarget);if(!o._viewMap)o._viewMap=[];o._viewMap[a.detail.url]=
c}p=c;b=this.findCurrentView(p,d.byId(a.target.id))||b}b.performTransition(p,a.detail.transitionDir,a.detail.transition,null,null)}}},_parse:function(g,a){var b,o,e,n,i=this.findCurrentView(),i=d.byId(a)&&d.byId(a).containerNode||l.byId(a)||i&&i.domNode.parentNode||h.body(),f=null;for(b=i.childNodes.length-1;b>=0;b--)if(e=i.childNodes[b],e.nodeType===1){e.getAttribute("fixed")==="bottom"&&(f=e);break}if(g.charAt(0)==="<"){b=c.create("DIV",{innerHTML:g});for(e=0;e<b.childNodes.length;e++)if(n=b.childNodes[e],
n.nodeType===1){o=n;break}if(!o){console.log("dojox.mobile.ViewController#_parse: invalid view content");return}o.style.visibility="hidden";i.insertBefore(b,f);e=m.parser.parse(b);k.forEach(e,function(g){g&&!g._started&&g.startup&&g.startup()});e=0;for(n=b.childNodes.length;e<n;e++)i.insertBefore(b.firstChild,f);i.removeChild(b);d.byNode(o)._visible=!0}else if(g.charAt(0)==="{"){b=c.create("DIV");i.insertBefore(b,f);this._ws=[];o=this._instantiate(eval("("+g+")"),b);for(e=0;e<this._ws.length;e++)i=
this._ws[e],i.startup&&!i._started&&(!i.getParent||!i.getParent())&&i.startup();this._ws=null}o.style.display="none";o.style.visibility="visible";return m.hash?"#"+o.id:o.id},_instantiate:function(g,a,b){var o,d;for(d in g)if(d.charAt(0)!="@"){var c=e.getObject(d);if(c)for(var n={},i=c.prototype,h=e.isArray(g[d])?g[d]:[g[d]],f=0;f<h.length;f++){for(var l in h[f])l.charAt(0)=="@"&&(o=h[f][l],l=l.substring(1),typeof i[l]=="string"?n[l]=o:typeof i[l]=="number"?n[l]=o-0:typeof i[l]=="boolean"?n[l]=o!=
"false":typeof i[l]=="object"&&(n[l]=eval("("+o+")")));o=new c(n,a);if(a)o._visible=!0,this._ws.push(o);b&&b.addChild&&b.addChild(o);this._instantiate(h[f],null,o)}}return o&&o.domNode}});new j;return j})},"dojox/mobile/_ItemBase":function(){define("dojox/mobile/_ItemBase",["dojo/_base/kernel","dojo/_base/config","dojo/_base/declare","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./TransitionEvent","./View"],function(m,k,f,j,e,h,l,i,c){return f("dojox.mobile._ItemBase",
[l,h,e],{icon:"",iconPos:"",alt:"",href:"",hrefTarget:"",moveTo:"",scene:"",clickable:!1,url:"",urlTarget:"",transition:"",transitionDir:1,transitionOptions:null,callback:null,sync:!0,label:"",toggle:!1,_duration:800,inheritParams:function(){var b=this.getParent();if(b){if(!this.transition)this.transition=b.transition;if(this.icon&&b.iconBase&&b.iconBase.charAt(b.iconBase.length-1)==="/")this.icon=b.iconBase+this.icon;if(!this.icon)this.icon=b.iconBase;if(!this.iconPos)this.iconPos=b.iconPos}},select:function(){},
deselect:function(){},defaultClickAction:function(b){if(this.toggle)this.selected?this.deselect():this.select();else if(!this.selected){this.select();if(!this.selectOne){var a=this;setTimeout(function(){a.deselect()},this._duration)}var d;if(this.moveTo||this.href||this.url||this.scene)d={moveTo:this.moveTo,href:this.href,url:this.url,scene:this.scene,transition:this.transition,transitionDir:this.transitionDir};else if(this.transitionOptions)d=this.transitionOptions;if(d)return(new i(this.domNode,
d,b)).dispatch()}},getParent:function(){var b=this.srcNodeRef||this.domNode;return b&&b.parentNode?j.getEnclosingWidget(b.parentNode):null},setTransitionPos:function(b){for(var a=this;;)if(a=a.getParent(),!a||a instanceof c)break;if(a)a.clickedPosX=b.clientX,a.clickedPosY=b.clientY},transitionTo:function(b,a,d,c){if(k.isDebug){var g=arguments.callee._ach||(arguments.callee._ach={}),o=(arguments.callee.caller||"unknown caller").toString();g[o]||(m.deprecated(this.declaredClass+"::transitionTo() is deprecated."+
o,"","2.0"),g[o]=!0)}(new i(this.domNode,{moveTo:b,href:a,url:d,scene:c,transition:this.transition,transitionDir:this.transitionDir})).dispatch()}})})},"dojox/mobile/ToolBarButton":function(){define("dojox/mobile/ToolBarButton",["dojo/_base/declare","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./common","./_ItemBase"],function(m,k,f,j,e,h,l){return m("dojox.mobile.ToolBarButton",l,{selected:!1,btnClass:"",_defaultColor:"mblColorDefault",_selColor:"mblColorDefaultSel",
buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||k.doc.createElement("div");this.inheritParams();f.add(this.domNode,"mblToolBarButton mblArrowButtonText");var e;if(this.selected)e=this._selColor;else if(this.domNode.className.indexOf("mblColor")==-1)e=this._defaultColor;f.add(this.domNode,e);if(!this.label)this.label=this.domNode.innerHTML;this.icon&&this.icon!="none"?(this.iconNode=j.create("div",{className:"mblToolBarButtonIcon"},this.domNode),h.createIcon(this.icon,this.iconPos,
null,this.alt,this.iconNode),this.iconPos&&f.add(this.iconNode.firstChild,"mblToolBarButtonSpriteIcon")):h.createDomButton(this.domNode)?f.add(this.domNode,"mblToolBarButtonDomButton"):f.add(this.domNode,"mblToolBarButtonText");this.connect(this.domNode,"onclick","onClick")},select:function(e){f.toggle(this.domNode,this._selColor,!e);this.selected=!e},deselect:function(){this.select(!0)},onClick:function(e){this.setTransitionPos(e);this.defaultClickAction()},_setBtnClassAttr:function(e){var c=this.domNode;
c.className.match(/(mblDomButton\w+)/)&&f.remove(c,RegExp.$1);f.add(c,e);h.createDomButton(this.domNode)&&f.add(this.domNode,"mblToolBarButtonDomButton")},_setLabelAttr:function(e){this.label=e;this.domNode.innerHTML=this._cv?this._cv(e):e}})})},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(m,k){return m("dijit._Contained",null,{_getSibling:function(f){var j=this.domNode;do j=j[f+"Sibling"];while(j&&j.nodeType!=1);return j&&k.byNode(j)},getPreviousSibling:function(){return this._getSibling("previous")},
getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var f=this.getParent();if(!f||!f.getIndexOfChild)return-1;return f.getIndexOfChild(this)}})})},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang",".."],function(m,k,f,j,e,h,l){var i=k("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,
placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(c,b,a){var d;c!==void 0&&(d=this.filter(c),typeof a!="string"&&(a=d!==null&&(typeof d!="number"||!isNaN(d))?this.filter(this.format(d,this.constraints)):""));if(a!=null&&a!=void 0&&(typeof a!="number"||!isNaN(a))&&this.textbox.value!=a)this.textbox.value=a,this._set("displayedValue",this.get("displayedValue"));this.textDir=="auto"&&this.applyTextDir(this.focusNode,a);this.inherited(arguments,
[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(c){c===null||c===void 0?c="":typeof c!="string"&&(c=String(c));this.textbox.value=c;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"));this.textDir=="auto"&&this.applyTextDir(this.focusNode,c)},format:function(c){return c==null||c==void 0?"":c.toString?c.toString():c},parse:function(c){return c},_refreshState:function(){},
onInput:function(){},__skipInputEvent:!1,_onInput:function(){this.textDir=="auto"&&this.applyTextDir(this.focusNode,this.focusNode.value);this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var c=function(b){var a=b.charOrCode||b.keyCode||229;if(b.type=="keydown")switch(a){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:return;default:if(a>=65&&a<=90)return}if(!(b.type==
"keypress"&&typeof a!="string")){if(b.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=!1;return}}else this.__skipInputEvent=!0;var d=h.mixin({},b,{charOrCode:a,wasConsumed:!1,preventDefault:function(){d.wasConsumed=!0;b.preventDefault()},stopPropagation:function(){b.stopPropagation()}});this.onInput(d)===!1&&j.stop(d);d.wasConsumed||setTimeout(h.hitch(this,"_onInput",d),0)}};m.forEach(["onkeydown","onkeypress","onpaste","oncut","oninput"],function(b){this.connect(this.textbox,b,c)},
this)},_blankValue:"",filter:function(c){if(c===null)return this._blankValue;if(typeof c!="string")return c;this.trim&&(c=h.trim(c));this.uppercase&&(c=c.toUpperCase());this.lowercase&&(c=c.toLowerCase());this.propercase&&(c=c.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return c},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(){this.disabled||(this._setBlurValue(),this.inherited(arguments),this._selectOnClickHandle&&this.disconnect(this._selectOnClickHandle))},
_isTextSelected:function(){return this.textbox.selectionStart==this.textbox.selectionEnd},_onFocus:function(c){if(!this.disabled&&!this.readOnly){if(this.selectOnClick&&c=="mouse")this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._isTextSelected()&&i.selectInputText(this.textbox)});this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)},_setTextDirAttr:function(c){if(!this._created||
this.textDir!=c)this._set("textDir",c),this.applyTextDir(this.focusNode,this.focusNode.value)}});i._setSelectionRange=l._setSelectionRange=function(c,b,a){c.setSelectionRange&&c.setSelectionRange(b,a)};i.selectInputText=l.selectInputText=function(c,b,a){c=f.byId(c);isNaN(b)&&(b=0);isNaN(a)&&(a=c.value?c.value.length:0);try{c.focus(),i._setSelectionRange(c,b,a)}catch(d){}};return i})},"app/views/Setup":function(){define("app/views/Setup",["dojo/_base/declare","dijit/registry","dojo/_base/lang","dojo/on",
"dojo/_base/xhr","dojo/dom-form","dojo/_base/event","dojo/_base/Deferred","app/views/ActivityList","dojox/mobile/ProgressIndicator"],function(m,k,f,j,e,h,l,i,c,b){return m("app.views.Setup",null,{view:null,constructor:function(){this.view=k.byId("setupView");this._setupEventHandlers()},_setupEventHandlers:function(){k.byId("startGameBtn").on("Click",f.hitch(this,this.startNewGame))},show:function(){this.view.show()},startNewGame:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(f.hitch(this,
function(a){this.currentLocation=a.coords;this.generateActivities()})):this.generateActivities()},generateActivities:function(){this.view.performTransition("activityListView",1,"slide");var a=new i;i.when(a,function(){b.getInstance().stop()});setTimeout(f.hitch(this,function(){for(var b=k.byId("setup_check_list").getChildren(),e=[],g=0;g<b.length;g++)b[g].checked&&e.push(b[g].id);viewCache.activityList=new c;viewCache.activityList.getActivitesForNewGame(e).then(function(){a.resolve()})}),150);return!1},
destroy_game:function(){localStorage.removeItem("game_activities");viewCache.activityList.removeData()}})})},"dojox/mobile/scrollable":function(){define("dojox/mobile/scrollable",["dojo/_base/kernel","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./sniff"],function(m,k,f,j,e,h,l,i,c){var b=j.getObject("dojox.mobile",!0),m=function(a){this.fixedFooterHeight=this.fixedHeaderHeight=0;this.isLocalFooter=!1;this.scrollBar=
!0;this.scrollDir="v";this.weight=0.6;this.fadeScrollBar=!0;this.disableFlashScrollBar=!1;this.threshold=4;this.constraint=!0;this.touchNode=null;this.dirLock=this.isNested=!1;this.height="";this.androidWorkaroud=!0;this.init=function(g){if(g)for(var a in g)g.hasOwnProperty(a)&&(this[a]=(a=="domNode"||a=="containerNode")&&typeof g[a]=="string"?e.doc.getElementById(g[a]):g[a]);this.touchNode=this.touchNode||this.containerNode;this._v=this.scrollDir.indexOf("v")!=-1;this._h=this.scrollDir.indexOf("h")!=
-1;this._f=this.scrollDir=="f";this._ch=[];this._ch.push(k.connect(this.touchNode,c("touch")?"touchstart":"onmousedown",this,"onTouchStart"));if(c("webkit")){this._ch.push(k.connect(this.domNode,"webkitAnimationEnd",this,"onFlickAnimationEnd"));this._ch.push(k.connect(this.domNode,"webkitAnimationStart",this,"onFlickAnimationStart"));if(this._aw=this.androidWorkaroud&&c("android")>=2.2&&c("android")<3)this._ch.push(k.connect(e.global,"onresize",this,"onScreenSizeChanged")),this._ch.push(k.connect(e.global,
"onfocus",this,function(){this.containerNode.style.webkitTransform&&(this.stopAnimation(),this.toTopLeft())})),this._sz=this.getScreenSize();for(g=0;g<3;g++)this.setKeyframes(null,null,g)}c("iphone")&&i.set(this.containerNode,"webkitTransform","translate3d(0,0,0)");this._speed={x:0,y:0};this._appFooterHeight=0;this.isTopLevel()&&!this.noResize&&this.resize();var b=this;setTimeout(function(){b.flashScrollBar()},600)};this.isTopLevel=function(){return!0};this.cleanup=function(){if(this._ch){for(var g=
0;g<this._ch.length;g++)k.disconnect(this._ch[g]);this._ch=null}};this.findDisp=function(g){if(!g.parentNode)return null;for(var a=g.parentNode.childNodes,b=0;b<a.length;b++){var d=a[b];if(d.nodeType===1&&h.contains(d,"mblView")&&d.style.display!=="none")return d}return g};this.getScreenSize=function(){return{h:e.global.innerHeight||e.doc.documentElement.clientHeight||e.doc.documentElement.offsetHeight,w:e.global.innerWidth||e.doc.documentElement.clientWidth||e.doc.documentElement.offsetWidth}};this.isKeyboardShown=
function(){if(!this._sz)return!1;var g=this.getScreenSize();return g.w*g.h/(this._sz.w*this._sz.h)<0.8};this.disableScroll=function(g){if(!(this.disableTouchScroll===g||this.domNode.style.display==="none")){this.disableTouchScroll=g;this.scrollBar=!g;var a=(b.disableHideAddressBar=b.disableResizeAll=g)?"visible":"hidden";i.set(this.domNode,"overflow",a);i.set(e.doc.documentElement,"overflow",a);i.set(e.body(),"overflow",a);a=this.containerNode;if(g){if(a.style.webkitTransform||(this.stopAnimation(),
this.toTopLeft()),g=parseInt(a.style.marginTop)||0,i.set(this.domNode,"height",a.offsetHeight+g+this.fixedFooterHeight-this._appFooterHeight+"px"),this._cPos={x:parseInt(a.style.left)||0,y:parseInt(a.style.top)||0},i.set(a,{top:"0px",left:"0px"}),g=e.doc.activeElement){for(var a=0,d=g;d.tagName!="BODY";d=d.offsetParent)a+=d.offsetTop;g=a+g.clientHeight+10-this.getScreenSize().h;if(g>0)e.body().scrollTop=g}}else{if(this._cPos)i.set(a,{top:this._cPos.y+"px",left:this._cPos.x+"px"}),this._cPos=null;
g=this.domNode.getElementsByTagName("*");for(a=0;a<g.length;a++)g[a].blur&&g[a].blur();b.resizeAll&&b.resizeAll()}}};this.onScreenSizeChanged=function(){var g=this.getScreenSize();if(g.w*g.h>this._sz.w*this._sz.h)this._sz=g;this.disableScroll(this.isKeyboardShown())};this.toTransform=function(){var g=this.containerNode;if(!(g.offsetTop===0&&g.offsetLeft===0)&&g._webkitTransform)i.set(g,{webkitTransform:g._webkitTransform,top:"0px",left:"0px"}),g._webkitTransform=null};this.toTopLeft=function(){var g=
this.containerNode;if(g.style.webkitTransform){g._webkitTransform=g.style.webkitTransform;var a=this.getPos();i.set(g,{webkitTransform:"",top:a.y+"px",left:a.x+"px"})}};this.resize=function(){this._appFooterHeight=this.fixedFooterHeight&&!this.isLocalFooter?this.fixedFooterHeight:0;if(this.isLocalHeader)this.containerNode.style.marginTop=this.fixedHeaderHeight+"px";for(var g=0,a=this.domNode;a&&a.tagName!="BODY";a=a.offsetParent){a=this.findDisp(a);if(!a)break;g+=a.offsetTop}var b,a=this.getScreenSize().h,
g=a-g-this._appFooterHeight;if(this.height==="inherit")this.domNode.offsetParent&&(b=this.domNode.offsetParent.offsetHeight+"px");else if(this.height==="auto"){if(b=this.domNode.offsetParent){this.domNode.style.height="0px";b=b.getBoundingClientRect();var g=this.domNode.getBoundingClientRect(),d=b.bottom-this._appFooterHeight,g=g.bottom>=d?a-(g.top-b.top)-this._appFooterHeight:d-g.bottom}a=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);b=(a?Math.min(a,g):g)+"px"}else if(this.height)b=
this.height;b||(b=g+"px");if(b.charAt(0)!=="-"&&b!=="default")this.domNode.style.height=b;this.onTouchEnd()};this.onFlickAnimationStart=function(g){f.stop(g)};this.onFlickAnimationEnd=function(g){var a=g&&g.animationName;if(a&&a.indexOf("scrollableViewScroll2")===-1)if(a.indexOf("scrollableViewScroll0")!==-1)h.remove(this._scrollBarNodeV,"mblScrollableScrollTo0");else if(a.indexOf("scrollableViewScroll1")!==-1)h.remove(this._scrollBarNodeH,"mblScrollableScrollTo1");else{if(this._scrollBarNodeV)this._scrollBarNodeV.className=
"";if(this._scrollBarNodeH)this._scrollBarNodeH.className=""}else if(g&&g.srcElement&&f.stop(g),this.stopAnimation(),this._bounce){var b=this,d=b._bounce;setTimeout(function(){b.slideTo(d,0.3,"ease-out")},0);b._bounce=void 0}else this.hideScrollBar(),this.removeCover(),this._aw&&this.toTopLeft()};this.isFormElement=function(g){if(g&&g.nodeType!==1)g=g.parentNode;if(!g||g.nodeType!==1)return!1;g=g.tagName;return g==="SELECT"||g==="INPUT"||g==="TEXTAREA"||g==="BUTTON"};this.onTouchStart=function(g){if(!this.disableTouchScroll&&
!(this._conn&&(new Date).getTime()-this.startTime<500)){if(!this._conn)this._conn=[],this._conn.push(k.connect(e.doc,c("touch")?"touchmove":"onmousemove",this,"onTouchMove")),this._conn.push(k.connect(e.doc,c("touch")?"touchend":"onmouseup",this,"onTouchEnd"));this._aborted=!1;if(h.contains(this.containerNode,"mblScrollableScrollTo2"))this.abort();else{if(this._scrollBarNodeV)this._scrollBarNodeV.className="";if(this._scrollBarNodeH)this._scrollBarNodeH.className=""}this._aw&&this.toTransform(g);
this.touchStartX=g.touches?g.touches[0].pageX:g.clientX;this.touchStartY=g.touches?g.touches[0].pageY:g.clientY;this.startTime=(new Date).getTime();this.startPos=this.getPos();this._dim=this.getDim();this._time=[0];this._posX=[this.touchStartX];this._posY=[this.touchStartY];this._locked=!1;!this.isFormElement(g.target)&&!this.isNested&&f.stop(g)}};this.onTouchMove=function(g){if(!this._locked){var a=g.touches?g.touches[0].pageX:g.clientX,g=g.touches?g.touches[0].pageY:g.clientY,b=a-this.touchStartX,
d=g-this.touchStartY,c={x:this.startPos.x+b,y:this.startPos.y+d},e=this._dim,b=Math.abs(b),d=Math.abs(d);if(this._time.length==1){if(this.dirLock&&(this._v&&!this._h&&b>=this.threshold&&b>=d||(this._h||this._f)&&!this._v&&d>=this.threshold&&d>=b)){this._locked=!0;return}if(this._v&&Math.abs(d)<this.threshold||(this._h||this._f)&&Math.abs(b)<this.threshold)return;this.addCover();this.showScrollBar()}b=this.weight;if(this._v&&this.constraint)if(c.y>0)c.y=Math.round(c.y*b);else if(c.y<-e.o.h)c.y=e.c.h<
e.d.h?Math.round(c.y*b):-e.o.h-Math.round((-e.o.h-c.y)*b);if((this._h||this._f)&&this.constraint)if(c.x>0)c.x=Math.round(c.x*b);else if(c.x<-e.o.w)c.x=e.c.w<e.d.w?Math.round(c.x*b):-e.o.w-Math.round((-e.o.w-c.x)*b);this.scrollTo(c);c=this._time.length;if(c>=2){var n,h;this._v&&!this._h?(n=this._posY[c-1]-this._posY[c-2],h=g-this._posY[c-1]):!this._v&&this._h&&(n=this._posX[c-1]-this._posX[c-2],h=a-this._posX[c-1]);if(n*h<0)this._time=[this._time[c-1]],this._posX=[this._posX[c-1]],this._posY=[this._posY[c-
1]],c=1}c==10&&(this._time.shift(),this._posX.shift(),this._posY.shift());this._time.push((new Date).getTime()-this.startTime);this._posX.push(a);this._posY.push(g)}};this.onTouchEnd=function(g){if(!this._locked){var a=this._speed={x:0,y:0},b=this._dim,d=this.getPos(),n={};if(g){if(!this._conn)return;for(a=0;a<this._conn.length;a++)k.disconnect(this._conn[a]);this._conn=null;var p=this._time.length,a=!1;this._aborted||(p<=1?a=!0:p==2&&Math.abs(this._posY[1]-this._posY[0])<4&&c("touch")&&(a=!0));p=
this.isFormElement(g.target);if(a&&!p){this.hideScrollBar();this.removeCover();if(c("touch")){var h=g.target;if(h.nodeType!=1)h=h.parentNode;var i=e.doc.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,e.global,1,g.screenX,g.screenY,g.clientX,g.clientY);setTimeout(function(){h.dispatchEvent(i)},0)}return}else if(this._aw&&a&&p){this.hideScrollBar();this.toTopLeft();return}a=this._speed=this.getSpeed()}else{if(d.x==0&&d.y==0)return;b=this.getDim()}if(this._v)n.y=d.y+a.y;if(this._h||this._f)n.x=
d.x+a.x;this.adjustDestination(n,d);if(this.scrollDir=="v"&&b.c.h<b.d.h)this.slideTo({y:0},0.3,"ease-out");else if(this.scrollDir=="h"&&b.c.w<b.d.w)this.slideTo({x:0},0.3,"ease-out");else if(this._v&&this._h&&b.c.h<b.d.h&&b.c.w<b.d.w)this.slideTo({x:0,y:0},0.3,"ease-out");else{var f,p="ease-out",l={};if(this._v&&this.constraint)if(n.y>0)d.y>0?(f=0.3,n.y=0):(n.y=Math.min(n.y,20),p="linear",l.y=0);else if(-a.y>b.o.h- -d.y)d.y<-b.o.h?(f=0.3,n.y=b.c.h<=b.d.h?0:-b.o.h):(n.y=Math.max(n.y,-b.o.h-20),p="linear",
l.y=-b.o.h);if((this._h||this._f)&&this.constraint)if(n.x>0)d.x>0?(f=0.3,n.x=0):(n.x=Math.min(n.x,20),p="linear",l.x=0);else if(-a.x>b.o.w- -d.x)d.x<-b.o.w?(f=0.3,n.x=b.c.w<=b.d.w?0:-b.o.w):(n.x=Math.max(n.x,-b.o.w-20),p="linear",l.x=-b.o.w);this._bounce=l.x!==void 0||l.y!==void 0?l:void 0;if(f===void 0){var j,G;if(this._v&&this._h)G=Math.sqrt(a.x+a.x+a.y*a.y),j=Math.sqrt(Math.pow(n.y-d.y,2)+Math.pow(n.x-d.x,2));else if(this._v)G=a.y,j=n.y-d.y;else if(this._h)G=a.x,j=n.x-d.x;if(j===0&&!g)return;f=
G!==0?Math.abs(j/G):0.01}this.slideTo(n,f,p)}}};this.adjustDestination=function(){};this.abort=function(){this.scrollTo(this.getPos());this.stopAnimation();this._aborted=!0};this.stopAnimation=function(){h.remove(this.containerNode,"mblScrollableScrollTo2");c("android")&&i.set(this.containerNode,"webkitAnimationDuration","0s");if(this._scrollBarV)this._scrollBarV.className="";if(this._scrollBarH)this._scrollBarH.className=""};this.getSpeed=function(){var a=0,b=0,d=this._time.length;if(d>=2&&(new Date).getTime()-
this.startTime-this._time[d-1]<500)var a=this._posX[d-(d>3?2:1)]-this._posX[d-6>=0?d-6:0],c=this._time[d-(d>3?2:1)]-this._time[d-6>=0?d-6:0],b=this.calcSpeed(this._posY[d-(d>3?2:1)]-this._posY[d-6>=0?d-6:0],c),a=this.calcSpeed(a,c);return{x:a,y:b}};this.calcSpeed=function(a,b){return Math.round(a/b*100)*4};this.scrollTo=function(a,b,d){d=(d||this.containerNode).style;if(c("webkit"))d.webkitTransform=this.makeTranslateStr(a);else{if(this._v)d.top=a.y+"px";if(this._h||this._f)d.left=a.x+"px"}b||this.scrollScrollBarTo(this.calcScrollBarPos(a))};
this.slideTo=function(a,b,d){this._runSlideAnimation(this.getPos(),a,b,d,this.containerNode,2);this.slideScrollBarTo(a,b,d)};this.makeTranslateStr=function(a){var d=this._v&&typeof a.y=="number"?a.y+"px":"0px",a=(this._h||this._f)&&typeof a.x=="number"?a.x+"px":"0px";return b.hasTranslate3d?"translate3d("+a+","+d+",0px)":"translate("+a+","+d+")"};this.getPos=function(){if(c("webkit")){var a=e.doc.defaultView.getComputedStyle(this.containerNode,"")["-webkit-transform"];if(a&&a.indexOf("matrix")===
0)return a=a.split(/[,\s\)]+/),{y:a[5]-0,x:a[4]-0};return{x:0,y:0}}else return{y:parseInt(this.containerNode.style.top)||0,x:this.containerNode.offsetLeft}};this.getDim=function(){var a={};a.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth};a.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth};a.d={h:a.v.h-this.fixedHeaderHeight-this.fixedFooterHeight,w:a.v.w};a.o={h:a.c.h-a.v.h+this.fixedHeaderHeight+this.fixedFooterHeight,w:a.c.w-a.v.w};return a};
this.showScrollBar=function(){if(this.scrollBar){var a=this._dim;if(!(this.scrollDir=="v"&&a.c.h<=a.d.h)&&!(this.scrollDir=="h"&&a.c.w<=a.d.w)&&(!this._v||!this._h||!(a.c.h<=a.d.h&&a.c.w<=a.d.w))){a=function(a,b){var g=a["_scrollBarNode"+b];if(!g){var g=l.create("div",null,a.domNode),d={position:"absolute",overflow:"hidden"};b=="V"?(d.right="2px",d.width="5px"):(d.bottom=(a.isLocalFooter?a.fixedFooterHeight:0)+2+"px",d.height="5px");i.set(g,d);g.className="mblScrollBarWrapper";a["_scrollBarWrapper"+
b]=g;g=l.create("div",null,g);i.set(g,{opacity:0.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",webkitBorderRadius:"2px",MozBorderRadius:"2px",webkitTransformOrigin:"0 0",zIndex:2147483647});i.set(g,b=="V"?{width:"5px"}:{height:"5px"});a["_scrollBarNode"+b]=g}return g};if(this._v&&!this._scrollBarV)this._scrollBarV=a(this,"V");if(this._h&&!this._scrollBarH)this._scrollBarH=a(this,"H");this.resetScrollBar()}}};this.hideScrollBar=function(){if(this.fadeScrollBar&&c("webkit")&&!b._fadeRule){var a=
l.create("style",null,e.doc.getElementsByTagName("head")[0]);a.textContent=".mblScrollableFadeScrollBar{  -webkit-animation-duration: 1s;  -webkit-animation-name: scrollableViewFadeScrollBar;}@-webkit-keyframes scrollableViewFadeScrollBar{  from { opacity: 0.6; }  to { opacity: 0; }}";b._fadeRule=a.sheet.cssRules[1]}if(this.scrollBar){a=function(a,b){i.set(a,{opacity:0,webkitAnimationDuration:""});b._aw?a.style.webkitTransform="":a.className="mblScrollableFadeScrollBar"};if(this._scrollBarV)a(this._scrollBarV,
this),this._scrollBarV=null;if(this._scrollBarH)a(this._scrollBarH,this),this._scrollBarH=null}};this.calcScrollBarPos=function(a){var b={},d=this._dim,c=function(a,b,g,d,c){g=Math.round((d-b-8)/(d-c)*g);g<-b+5&&(g=-b+5);g>a-5&&(g=a-5);return g};if(typeof a.y=="number"&&this._scrollBarV)b.y=c(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,a.y,d.d.h,d.c.h);if(typeof a.x=="number"&&this._scrollBarH)b.x=c(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,a.x,d.d.w,
d.c.w);return b};this.scrollScrollBarTo=function(a){if(this.scrollBar){if(this._v&&this._scrollBarV&&typeof a.y=="number")c("webkit")?this._scrollBarV.style.webkitTransform=this.makeTranslateStr({y:a.y}):this._scrollBarV.style.top=a.y+"px";if(this._h&&this._scrollBarH&&typeof a.x=="number")c("webkit")?this._scrollBarH.style.webkitTransform=this.makeTranslateStr({x:a.x}):this._scrollBarH.style.left=a.x+"px"}};this.slideScrollBarTo=function(a,b,d){if(this.scrollBar){var c=this.calcScrollBarPos(this.getPos()),
a=this.calcScrollBarPos(a);this._v&&this._scrollBarV&&this._runSlideAnimation({y:c.y},{y:a.y},b,d,this._scrollBarV,0);this._h&&this._scrollBarH&&this._runSlideAnimation({x:c.x},{x:a.x},b,d,this._scrollBarH,1)}};this._runSlideAnimation=function(b,d,e,n,f,p){c("webkit")?(this.setKeyframes(b,d,p),i.set(f,{webkitAnimationDuration:e+"s",webkitAnimationTimingFunction:n}),h.add(f,"mblScrollableScrollTo"+p),p==2?this.scrollTo(d,!0,f):this.scrollScrollBarTo(d)):a.fx&&a.fx.easing&&e?(b=a.fx.slideTo({node:f,
duration:e*1E3,left:d.x,top:d.y,easing:n=="ease-out"?a.fx.easing.quadOut:a.fx.easing.linear}).play(),p==2&&k.connect(b,"onEnd",this,"onFlickAnimationEnd")):p==2?(this.scrollTo(d,!1,f),this.onFlickAnimationEnd()):this.scrollScrollBarTo(d)};this.resetScrollBar=function(){var a=function(a,b,d,g,c,e){if(b){var n={};n[e?"top":"left"]=c+4+"px";c=d-8<=0?1:d-8;n[e?"height":"width"]=c+"px";i.set(a,n);a=Math.round(d*d/g);a=Math.min(Math.max(a-8,5),c);b.style[e?"height":"width"]=a+"px";i.set(b,{opacity:0.6})}},
b=this.getDim();a(this._scrollBarWrapperV,this._scrollBarV,b.d.h,b.c.h,this.fixedHeaderHeight,!0);a(this._scrollBarWrapperH,this._scrollBarH,b.d.w,b.c.w,0);this.createMask()};this.createMask=function(){if(c("webkit")){var a;if(this._scrollBarWrapperV){var b=this._scrollBarWrapperV.offsetHeight;a=e.doc.getCSSCanvasContext("2d","scrollBarMaskV",5,b);a.fillStyle="rgba(0,0,0,0.5)";a.fillRect(1,0,3,2);a.fillRect(0,1,5,1);a.fillRect(0,b-2,5,1);a.fillRect(1,b-1,3,2);a.fillStyle="rgb(0,0,0)";a.fillRect(0,
2,5,b-4);this._scrollBarWrapperV.style.webkitMaskImage="-webkit-canvas(scrollBarMaskV)"}if(this._scrollBarWrapperH)b=this._scrollBarWrapperH.offsetWidth,a=e.doc.getCSSCanvasContext("2d","scrollBarMaskH",b,5),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,1,2,3),a.fillRect(1,0,1,5),a.fillRect(b-2,0,1,5),a.fillRect(b-1,1,2,3),a.fillStyle="rgb(0,0,0)",a.fillRect(2,0,b-4,5),this._scrollBarWrapperH.style.webkitMaskImage="-webkit-canvas(scrollBarMaskH)"}};this.flashScrollBar=function(){if(!this.disableFlashScrollBar&&
(this._dim=this.getDim(),!(this._dim.d.h<=0))){this.showScrollBar();var a=this;setTimeout(function(){a.hideScrollBar()},300)}};this.addCover=function(){if(!c("touch")&&!this.noCover)this._cover?this._cover.style.display="":(this._cover=l.create("div",null,e.doc.body),i.set(this._cover,{backgroundColor:"#ffff00",opacity:0,position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:2147483647}),this._ch.push(k.connect(this._cover,c("touch")?"touchstart":"onmousedown",this,"onTouchEnd"))),
this.setSelectable(this._cover,!1),this.setSelectable(this.domNode,!1)};this.removeCover=function(){if(!c("touch")&&this._cover)this._cover.style.display="none",this.setSelectable(this._cover,!0),this.setSelectable(this.domNode,!0)};this.setKeyframes=function(a,d,c){if(!b._rule)b._rule=[];if(!b._rule[c]){var n=l.create("style",null,e.doc.getElementsByTagName("head")[0]);n.textContent=".mblScrollableScrollTo"+c+"{-webkit-animation-name: scrollableViewScroll"+c+";}@-webkit-keyframes scrollableViewScroll"+
c+"{}";b._rule[c]=n.sheet.cssRules[1]}if(c=b._rule[c])if(a&&(c.deleteRule("from"),c.insertRule("from { -webkit-transform: "+this.makeTranslateStr(a)+"; }")),d){if(d.x===void 0)d.x=a.x;if(d.y===void 0)d.y=a.y;c.deleteRule("to");c.insertRule("to { -webkit-transform: "+this.makeTranslateStr(d)+"; }")}};this.setSelectable=function(a,b){a.style.KhtmlUserSelect=b?"auto":"none";a.style.MozUserSelect=b?"":"none";a.onselectstart=b?null:function(){return!1}};if(c("webkit")){var d=e.doc.createElement("div");
d.style.webkitTransform="translate3d(0px,1px,0px)";e.doc.documentElement.appendChild(d);var n=e.doc.defaultView.getComputedStyle(d,"")["-webkit-transform"];b.hasTranslate3d=n&&n.indexOf("matrix")===0;e.doc.documentElement.removeChild(d)}};return b.scrollable=m})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","./registry"],function(m,k,f,j){return k("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=
this.domNode},addChild:function(e,h){var l=this.containerNode;if(h&&typeof h=="number"){var i=this.getChildren();if(i&&i.length>=h)l=i[h-1].domNode,h="after"}f.place(e.domNode,l,h);this._started&&!e._started&&e.startup()},removeChild:function(e){typeof e=="number"&&(e=this.getChildren()[e]);if(e)(e=e.domNode)&&e.parentNode&&e.parentNode.removeChild(e)},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(e,h){var f=e.domNode,i=h>0?"nextSibling":"previousSibling";
do f=f[i];while(f&&(f.nodeType!=1||!j.byNode(f)));return f&&j.byNode(f)},getIndexOfChild:function(e){return m.indexOf(this.getChildren(),e)}})})},"app/controller/Main":function(){define("app/controller/Main",["dojo/_base/Deferred","dojo/_base/lang","dojo/_base/json","dojo/dom","dijit/registry","dojo/on","app/views/ActivityList","app/views/Setup","app/views/TaskList","app/views/Map","dojox/mobile/parser","dojox/mobile/View","dojox/mobile/ScrollableView","dojox/mobile/Opener","dojox/mobile/Heading",
"dojox/mobile/RoundRect","dojox/mobile/RoundRectCategory","dojox/mobile/RoundRectList","dojox/mobile/TabBar","dojox/mobile/TabBarButton","dojox/mobile/Button","dojox/mobile/TextBox","dojox/mobile/RadioButton","dojox/mobile/CheckBox","dojox/mobile/RoundRectList","dojox/mobile/ListItem","dojox/mobile/Switch","dojox/mobile/EdgeToEdgeList","dojox/mobile/ToolBarButton","dojo/domReady!"],function(m,k,f,j,e,h,l,i){return{activityDetailList:null,setStartPage:function(){this.contentNode=j.byId("content");
window.localStorage?((cachedActivitiesData=localStorage.getItem("game_activities"))?(viewCache.setup=new i,viewCache.activityList=new l,viewCache.activityList.show()):(viewCache.setup=new i,viewCache.setup.show()),j.byId("contentContainer").style.display="block"):console.error("Browser not supported")}}})},"dojox/mobile/ScrollableView":function(){define("dojox/mobile/ScrollableView",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dijit/registry","./View","./_ScrollableMixin"],
function(m,k,f,j,e,h,l){return k("dojox.mobile.ScrollableView",[h,l],{scrollableParams:null,keepScrollPos:!1,constructor:function(){this.scrollableParams={noResize:!0}},buildRendering:function(){this.inherited(arguments);f.add(this.domNode,"mblScrollableView");this.domNode.style.overflow="hidden";this.domNode.style.top="0px";this.containerNode=j.create("DIV",{className:"mblScrollableViewContainer"},this.domNode);this.containerNode.style.position="absolute";this.containerNode.style.top="0px";if(this.scrollDir===
"v")this.containerNode.style.width="100%";this.reparent();this.findAppBars()},resize:function(){this.inherited(arguments);m.forEach(this.getChildren(),function(e){e.resize&&e.resize()})},isTopLevel:function(){var e=this.getParent&&this.getParent();return!e||!e.resize},addChild:function(e){var c=e.domNode,b=this.checkFixedBar(c,!0);if(b){this.domNode.appendChild(c);if(b==="top")this.fixedHeaderHeight=c.offsetHeight,this.isLocalHeader=!0;else if(b==="bottom")this.fixedFooterHeight=c.offsetHeight,this.isLocalFooter=
!0,c.style.bottom="0px";this.resize();this._started&&!e._started&&e.startup()}else this.inherited(arguments)},reparent:function(){var e,c,b,a;c=e=0;for(b=this.domNode.childNodes.length;e<b;e++)a=this.domNode.childNodes[c],a===this.containerNode||this.checkFixedBar(a,!0)?c++:this.containerNode.appendChild(this.domNode.removeChild(a))},onAfterTransitionIn:function(){this.flashScrollBar()},getChildren:function(){var f=this.inherited(arguments);this.fixedHeader&&this.fixedHeader.parentNode===this.domNode&&
f.push(e.byNode(this.fixedHeader));this.fixedFooter&&this.fixedFooter.parentNode===this.domNode&&f.push(e.byNode(this.fixedFooter));return f}})})},"dojo/selector/_loader":function(){define("dojo/selector/_loader",["../has","require"],function(m,k){var f=document.createElement("div");m.add("dom-qsa2.1",!!f.querySelectorAll);m.add("dom-qsa3",function(){try{return f.innerHTML="<p class='TEST'></p>",f.querySelectorAll(".TEST:empty").length==1}catch(e){}});var j;return{load:function(e,f,l){var i=k,e=e==
"default"?m("config-selectorEngine")||"css3":e,e=e=="css2"||e=="lite"?"./lite":e=="css2.1"?m("dom-qsa2.1")?"./lite":"./acme":e=="css3"?m("dom-qsa3")?"./lite":"./acme":e=="acme"?"./acme":(i=f)&&e;if(e.charAt(e.length-1)=="?")var e=e.substring(0,e.length-1),c=!0;if(c&&(m("dom-compliant-qsa")||j))return l(j);i([e],function(b){e!="./lite"&&(j=b);l(b)})}}})},"dojo/_base/declare":function(){define("dojo/_base/declare",["./kernel","../has","./lang"],function(m,k,f){function j(a,b){throw Error("declare"+
(b?" "+b:"")+": "+a);}function e(a,b,d){var c,g,e,n,f,o,h,i=this._inherited=this._inherited||{};typeof a=="string"&&(c=a,a=b,b=d);d=0;n=a.callee;(c=c||n.nom)||j("can't deduce a name to call inherited()",this.declaredClass);f=this.constructor._meta;e=f.bases;h=i.p;if(c!=v){if(i.c!==n&&(h=0,o=e[0],f=o._meta,f.hidden[c]!==n)){(g=f.chains)&&typeof g[c]=="string"&&j("calling chained method with inherited: "+c,this.declaredClass);do if(f=o._meta,g=o.prototype,f&&(g[c]===n&&g.hasOwnProperty(c)||f.hidden[c]===
n))break;while(o=e[++h]);h=o?h:-1}if(o=e[++h])if(g=o.prototype,o._meta&&g.hasOwnProperty(c))d=g[c];else{n=p[c];do if(g=o.prototype,(d=g[c])&&(o._meta?g.hasOwnProperty(c):d!==n))break;while(o=e[++h])}d=o&&d||p[c]}else{if(i.c!==n&&(h=0,(f=e[0]._meta)&&f.ctor!==n)){g=f.chains;for((!g||g.constructor!=="manual")&&j("calling chained constructor with inherited",this.declaredClass);o=e[++h];)if((f=o._meta)&&f.ctor===n)break;h=o?h:-1}for(;o=e[++h];)if(d=(f=o._meta)?f.ctor:o)break;d=o&&d}i.c=d;i.p=h;if(d)return b===
!0?d:d.apply(this,b||a)}function h(a,b){if(typeof a=="string")return this.__inherited(a,b,!0);return this.__inherited(a,!0)}function l(a,b,d){var c=this.getInherited(a,b);if(c)return c.apply(this,d||b||a)}function i(a){for(var b=this.constructor._meta.bases,d=0,c=b.length;d<c;++d)if(b[d]===a)return!0;return this instanceof a}function c(a,b){for(var d in b)d!=v&&b.hasOwnProperty(d)&&(a[d]=b[d]);if(k("bug-for-in-skips-shadowed"))for(var c=f._extraNames,g=c.length;g;)d=c[--g],d!=v&&b.hasOwnProperty(d)&&
(a[d]=b[d])}function b(a){t.safeMixin(this.prototype,a);return this}function a(a,b){return function(){var w;var d=arguments,c=d,g=d[0],e,n;n=a.length;var o;if(!(this instanceof d.callee))return q(d);if(b&&(g&&g.preamble||this.preamble)){o=Array(a.length);o[0]=d;for(e=0;;){if(g=d[0])(g=g.preamble)&&(d=g.apply(this,d)||d);g=a[e].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(d=g.apply(this,d)||d);if(++e==n)break;o[e]=d}}for(e=n-1;e>=0;--e)g=a[e],(w=(n=g._meta)?n.ctor:g,g=w)&&g.apply(this,
o?o[e]:d);(g=this.postscript)&&g.apply(this,c)}}function d(a,b){return function(){var d=arguments,g=d,c=d[0];if(!(this instanceof d.callee))return q(d);if(b){if(c)(c=c.preamble)&&(g=c.apply(this,g)||g);(c=this.preamble)&&c.apply(this,g)}a&&a.apply(this,d);(c=this.postscript)&&c.apply(this,d)}}function n(a){return function(){var w;var b=arguments,d=0,g,c;if(!(this instanceof b.callee))return q(b);for(;g=a[d];++d)if(w=(c=g._meta)?c.ctor:g,g=w){g.apply(this,b);break}(g=this.postscript)&&g.apply(this,
b)}}function g(a,b,d){return function(){var g,c,e=0,n=1;d&&(e=b.length-1,n=-1);for(;g=b[e];e+=n)c=g._meta,(g=(c?c.hidden:g.prototype)[a])&&g.apply(this,arguments)}}function o(a){s.prototype=a.prototype;a=new s;s.prototype=null;return a}function q(a){var b=a.callee,d=o(b);b.apply(d,a);return d}function t(l,s,k){typeof l!="string"&&(k=s,s=l,l="");var k=k||{},m,q,w,A,H,y,D,I=1,P=s;if(r.call(s)=="[object Array]"){I=l;w=[];A=[{cls:0,refs:[]}];y={};for(var J=1,L=s.length,F=0,C,K,x,E;F<L;++F){(C=s[F])?r.call(C)!=
"[object Function]"&&j("mixin #"+F+" is not a callable constructor.",I):j("mixin #"+F+" is unknown. Did you use dojo.require to pull it in?",I);K=C._meta?C._meta.bases:[C];x=0;for(C=K.length-1;C>=0;--C){E=K[C].prototype;if(!E.hasOwnProperty("declaredClass"))E.declaredClass="uniqName_"+B++;E=E.declaredClass;y.hasOwnProperty(E)||(y[E]={count:0,refs:[],cls:K[C]},++J);E=y[E];x&&x!==E&&(E.refs.push(x),++x.count);x=E}++x.count;A[0].refs.push(x)}for(;A.length;){x=A.pop();w.push(x.cls);for(--J;q=x.refs,q.length==
1;){x=q[0];if(!x||--x.count){x=0;break}w.push(x.cls);--J}if(x){F=0;for(L=q.length;F<L;++F)x=q[F],--x.count||A.push(x)}}J&&j("can't build consistent linearization",I);C=s[0];w[0]=C?C._meta&&C===w[w.length-C._meta.bases.length]?C._meta.bases.length:1:0;y=w;w=y[0];I=y.length-w;s=y[I]}else y=[0],s?r.call(s)=="[object Function]"?(w=s._meta,y=y.concat(w?w.bases:s)):j("base class is not a callable constructor.",l):s!==null&&j("unknown base class. Did you use dojo.require to pull it in?",l);if(s)for(q=I-
1;;--q){m=o(s);if(!q)break;w=y[q];(w._meta?c:u)(m,w.prototype);A=new Function;A.superclass=s;A.prototype=m;s=m.constructor=A}else m={};t.safeMixin(m,k);w=k.constructor;if(w!==p.constructor)w.nom=v,m.constructor=w;for(q=I-1;q;--q)(w=y[q]._meta)&&w.chains&&(D=u(D||{},w.chains));m["-chains-"]&&(D=u(D||{},m["-chains-"]));w=!D||!D.hasOwnProperty(v);y[0]=A=D&&D.constructor==="manual"?n(y):y.length==1?d(k.constructor,w):a(y,w);A._meta={bases:y,hidden:k,chains:D,parents:P,ctor:k.constructor};A.superclass=
s&&s.prototype;A.extend=b;A.prototype=m;m.constructor=A;m.getInherited=h;m.isInstanceOf=i;m.inherited=z;m.__inherited=e;if(l)m.declaredClass=l,f.setObject(l,A);if(D)for(H in D)if(m[H]&&typeof D[H]=="string"&&H!=v)w=m[H]=g(H,y,D[H]==="after"),w.nom=H;return A}var u=f.mixin,p=Object.prototype,r=p.toString,s=new Function,B=0,v="constructor",z=m.config.isDebug?l:e;m.safeMixin=t.safeMixin=function(a,b){var d,g;for(d in b)if(g=b[d],(g!==p[d]||!(d in p))&&d!=v){if(r.call(g)=="[object Function]")g.nom=d;
a[d]=g}if(k("bug-for-in-skips-shadowed"))for(var c=f._extraNames,e=c.length;e;)if(d=c[--e],g=b[d],(g!==p[d]||!(d in p))&&d!=v){if(r.call(g)=="[object Function]")g.nom=d;a[d]=g}return a};return m.declare=t})},"dojox/mobile/sniff":function(){define("dojox/mobile/sniff",["dojo/_base/window","dojo/_base/sniff"],function(m,k){var f=navigator.userAgent;k.add("bb",f.indexOf("BlackBerry")>=0&&parseFloat(f.split("Version/")[1])||void 0,void 0,!0);k.add("android",parseFloat(f.split("Android ")[1])||void 0,
void 0,!0);if(f.match(/(iPhone|iPod|iPad)/)){var j=RegExp.$1.replace(/P/,"p"),f=f.match(/OS ([\d_]+)/)?RegExp.$1:"1",f=parseFloat(f.replace(/_/,".").replace(/_/g,""));k.add(j,f,void 0,!0);k.add("iphone",f,void 0,!0)}k("webkit")&&k.add("touch",typeof m.doc.documentElement.ontouchstart!="undefined"&&navigator.appVersion.indexOf("Mobile")!=-1||!!k("android"),void 0,!0);return k})},"dojox/mobile/ProgressIndicator":function(){define("dojox/mobile/ProgressIndicator",["dojo/_base/config","dojo/_base/declare",
"dojo/dom-construct","dojo/dom-style","dojo/has"],function(m,k,f,j,e){var h=k("dojox.mobile.ProgressIndicator",null,{interval:100,colors:["#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0","#B8B9B8","#AEAFAE","#A4A5A4","#9A9A9A","#8E8E8E","#838383"],constructor:function(){this._bars=[];this.domNode=f.create("DIV");this.domNode.className="mblProgContainer";m.mblAndroidWorkaround!==!1&&e("android")>=2.2&&e("android")<3&&j.set(this.domNode,"webkitTransform","translate3d(0,0,0)");this.spinnerNode=
f.create("DIV",null,this.domNode);for(var h=0;h<this.colors.length;h++)this._bars.push(f.create("DIV",{className:"mblProg mblProg"+h},this.spinnerNode))},start:function(){if(this.imageNode){var e=this.imageNode;e.style.margin=Math.round((this.domNode.offsetHeight-e.offsetHeight)/2)+"px "+Math.round((this.domNode.offsetWidth-e.offsetWidth)/2)+"px"}else{var f=0,c=this,b=this.colors.length;this.timer=setInterval(function(){f--;f=f<0?b-1:f;for(var a=c.colors,d=0;d<b;d++)c._bars[d].style.backgroundColor=
a[(f+d)%b]},this.interval)}},stop:function(){this.timer&&clearInterval(this.timer);this.timer=null;this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)},setImage:function(e){if(e)this.imageNode=f.create("IMG",{src:e},this.domNode),this.spinnerNode.style.display="none";else{if(this.imageNode)this.domNode.removeChild(this.imageNode),this.imageNode=null;this.spinnerNode.style.display=""}}});h._instance=null;h.getInstance=function(){if(!h._instance)h._instance=new h;return h._instance};
return h})},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/_base/sniff","dojo/_base/window","dojo/window","../a11y"],function(m,k,f,j,e,h,l,i,c,b){return k("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",postCreate:function(){this.inherited(arguments);
this.connect(this.domNode,"onmousedown","_onMouseDown")},_setDisabledAttr:function(a){this._set("disabled",a);f.set(this.focusNode,"disabled",a);this.valueNode&&f.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a);a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",m.forEach(e.isArray(a)?a:[a],function(a){a=this[a];l("webkit")||b.hasDefaultTabStop(a)?
a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):this.tabIndex!=""&&this.set("tabIndex",this.tabIndex)},_onFocus:function(){this.scrollOnFocus&&c.scrollIntoView(this.domNode);this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&j.get(this.domNode,"display")!="none"},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return typeof a=="number"&&typeof b=="number"?isNaN(a)&&isNaN(b)?
0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(this._lastValueReported==void 0&&(b===null||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||this.compare(a,this._lastValueReported)!=0;if((this.intermediateChanges||b||b===void 0)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&
clearTimeout(this._onChangeHandle),this._onChangeHandle=setTimeout(e.hitch(this,function(){this._onChangeHandle=null;this.onChange(a)}),0)},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(clearTimeout(this._onChangeHandle),this.onChange(this._lastValueReported));this.inherited(arguments)},_onMouseDown:function(a){if(!a.ctrlKey&&h.isLeft(a)&&this.isFocusable())var b=this.connect(i.body(),"onmouseup",function(){this.isFocusable()&&this.focus();
this.disconnect(b)})}})})},"dojo/dom-construct":function(){define("dojo/dom-construct",["exports","./_base/kernel","./_base/sniff","./_base/window","./dom","./dom-attr","./on"],function(m,k,f,j,e,h,l){function i(a,b){var d=b.parentNode;d&&d.insertBefore(a,b)}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,
a={},d=0,n="__"+k._scopeName+"ToDomId",g;for(g in c)if(c.hasOwnProperty(g))k=c[g],k.pre=g=="option"?'<select multiple="multiple">':"<"+k.join("><")+">",k.post="</"+k.reverse().join("></")+">";var o=null,q;l(window,"unload",function(){o=null});m.toDom=function(g,e){var e=e||j.doc,o=e[n];o||(e[n]=o=++d+"",a[o]=e.createElement("div"));g+="";var f=g.match(b),h=f?f[1].toLowerCase():"",o=a[o];if(f&&c[h]){f=c[h];o.innerHTML=f.pre+g+f.post;for(f=f.length;f;--f)o=o.firstChild}else o.innerHTML=g;if(o.childNodes.length==
1)return o.removeChild(o.firstChild);for(h=e.createDocumentFragment();f=o.firstChild;)h.appendChild(f);return h};m.place=function(a,b,d){b=e.byId(b);typeof a=="string"&&(a=/^\s*</.test(a)?m.toDom(a,b.ownerDocument):e.byId(a));if(typeof d=="number"){var g=b.childNodes;!g.length||g.length<=d?b.appendChild(a):i(a,g[d<0?0:d])}else switch(d){case "before":i(a,b);break;case "after":d=a;(g=b.parentNode)&&(g.lastChild==b?g.appendChild(d):g.insertBefore(d,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,
b);break;case "only":m.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){i(a,b.firstChild);break}default:b.appendChild(a)}return a};m.create=function(a,b,d,g){var c=j.doc;if(d)d=e.byId(d),c=d.ownerDocument;typeof a=="string"&&(a=c.createElement(a));b&&h.set(a,b);d&&m.place(a,d,g);return a};m.empty=function(a){e.byId(a).innerHTML=""};m.destroy=function(a){a=e.byId(a);try{var b=a.ownerDocument;if(!o||q!=b)o=b.createElement("div"),q=b;o.appendChild(a.parentNode?a.parentNode.removeChild(a):
a);o.innerHTML=""}catch(d){}}})},"dojox/mobile/Opener":function(){define("dojox/mobile/Opener",["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/dom-geometry","./Tooltip","./Overlay"],function(m,k,f,j,e,h,l,i,c){var b=j.contains(f.doc.documentElement,"dj_phone"),m=m("dojox.mobile.Opener",b?c:i,{buildRendering:function(){this.inherited(arguments);this.cover=e.create("div",{onclick:k.hitch(this,"_onBlur"),"class":"mblOpenerUnderlay",
style:{top:"0px",left:"0px",width:"0px",height:"0px",position:b?"absolute":"fixed",backgroundColor:"transparent",overflow:"hidden",zIndex:"-1"}},this.domNode,"first");this.connect(null,f.global.onorientationchange!==void 0?"onorientationchange":"onresize",k.hitch(this,function(){h.get(this.cover,"height")!=="0px"&&this._resizeCover()}))},onShow:function(){},onHide:function(){},show:function(a){this.node=a;this.onShow(a);this._resizeCover();return this.inherited(arguments)},hide:function(a){this.inherited(arguments);
h.set(this.cover,{height:"0px"});this.onHide(this.node,a)},_resizeCover:function(){b?(h.set(this.cover,{height:"0px"}),setTimeout(k.hitch(this,function(){var a=l.position(this.domNode,!1);h.set(this.cover,{top:-a.y+"px",left:-a.x+"px",width:a.w+a.x+"px",height:a.h+a.y+"px"})}),0)):h.set(this.cover,{width:Math.max(f.doc.documentElement.scrollWidth||f.body().scrollWidth||f.doc.documentElement.clientWidth)+"px",height:Math.max(f.doc.documentElement.scrollHeight||f.body().scrollHeight||f.doc.documentElement.clientHeight)+
"px"})},_onBlur:function(a){var b=this.onBlur(a);b!==!1&&this.hide(a);return b}});m.prototype.baseClass+=" mblOpener";return m})},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/sniff","./_FormWidgetMixin"],function(m,k,f,j,e){return m("dijit.form._FormValueMixin",e,{readOnly:!1,_setReadOnlyAttr:function(e){k.set(this.focusNode,"readOnly",e);this.focusNode.setAttribute("aria-readonly",e);this._set("readOnly",
e)},postCreate:function(){this.inherited(arguments);if(this._resetValue===void 0)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(e,f){this._handleOnChange(e,f)},_handleOnChange:function(e){this._set("value",e);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(e){if(e.keyCode==f.ESCAPE&&!e.ctrlKey&&!e.altKey&&!e.metaKey){var l;e.preventDefault();
l=document.createEventObject();l.keyCode=f.ESCAPE;l.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",l)}}})})},"dojox/mobile/common":function(){define("dojox/mobile/common",["dojo/_base/kernel","dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/ready","dijit/registry","./sniff","./uacss"],function(m,k,f,j,e,h,l,i,c,b,a,d){var n=e.getObject("dojox.mobile",!0);n.getScreenSize=function(){return{h:h.global.innerHeight||
h.doc.documentElement.clientHeight,w:h.global.innerWidth||h.doc.documentElement.clientWidth}};n.updateOrient=function(){var a=n.getScreenSize();l.replace(h.doc.documentElement,a.h>a.w?"dj_portrait":"dj_landscape",a.h>a.w?"dj_landscape":"dj_portrait")};n.updateOrient();n.tabletSize=500;n.detectScreenSize=function(a){var b=n.getScreenSize(),d=Math.min(b.w,b.h),c,e;if(d>=n.tabletSize&&(a||!this._sz||this._sz<n.tabletSize))c="phone",e="tablet";else if(d<n.tabletSize&&(a||!this._sz||this._sz>=n.tabletSize))c=
"tablet",e="phone";e&&(l.replace(h.doc.documentElement,"dj_"+e,"dj_"+c),j.publish("/dojox/mobile/screenSize/"+e,[b]));this._sz=d};n.detectScreenSize();n.setupIcon=function(a,b){if(a&&b){var d=k.map(b.split(/[ ,]/),function(a){return a-0}),e=d[0],n=d[1];c.set(a,{clip:"rect("+e+"px "+(d[1]+d[2])+"px "+(d[0]+d[3])+"px "+n+"px)",top:(a.parentNode?c.get(a,"top"):0)-e+"px",left:-n+"px"})}};n.hideAddressBarWait=typeof f.mblHideAddressBarWait==="number"?f.mblHideAddressBarWait:1500;n.hide_1=function(a){scrollTo(0,
1);var b=n.getScreenSize().h+"px";if(d("android")){if(a)h.body().style.minHeight=b;n.resizeAll()}else if(a||n._h===b&&b!==h.body().style.minHeight)h.body().style.minHeight=b,n.resizeAll();n._h=b};n.hide_fs=function(){h.body();h.body().style.minHeight=n.getScreenSize().h*2+"px";scrollTo(0,1);setTimeout(function(){n.hide_1(1);n._hiding=!1},1E3)};n.hideAddressBar=function(){if(!n.disableHideAddressBar&&!n._hiding)n._hiding=!0,n._h=0,h.body().style.minHeight=n.getScreenSize().h*2+"px",setTimeout(n.hide_1,
0),setTimeout(n.hide_1,200),setTimeout(n.hide_1,800),setTimeout(n.hide_fs,n.hideAddressBarWait)};n.resizeAll=function(b,d){if(!n.disableResizeAll){j.publish("/dojox/mobile/resizeAll",[b,d]);n.updateOrient();n.detectScreenSize();var c=function(a){var b=a.getParent&&a.getParent();return!(b&&b.resize||!a.resize)},e=function(a){k.forEach(a.getChildren(),function(a){c(a)&&a.resize();e(a)})};d?(d.resize&&d.resize(),e(d)):k.forEach(k.filter(a.toArray(),c),function(a){a.resize()})}};n.openWindow=function(a,
b){h.global.open(a,b||"_blank")};n.createDomButton=function(a,b,e){if(!n._domButtons)if(d("webkit")){var h=function(a,b){var d,c;if(!a){var b={},g=m.doc.styleSheets;for(d=0;d<g.length;d++)g[d]&&h(g[d],b);return b}g=a.cssRules||[];for(d=0;d<g.length;d++)if(c=g[d],c.href&&c.styleSheet)h(c.styleSheet,b);else if(c.selectorText){var e=c.selectorText.split(/,/);for(c=0;c<e.length;c++){var n=e[c],f=n.split(/>/).length-1;if(n.match(/(mblDomButton\w+)/)&&(n=RegExp.$1,!b[n]||f>b[n]))b[n]=f}}};n._domButtons=
h()}else n._domButtons={};var j=a.className,p=e||a;if(j.match(/(mblDomButton\w+)/)&&j.indexOf("/")===-1){var k=RegExp.$1,s=4;j.match(/(mblDomButton\w+_(\d+))/)?s=RegExp.$2-0:n._domButtons[k]!==void 0&&(s=n._domButtons[k]);j=null;d("bb")&&f.mblBBBoxShadowWorkaround!==!1&&(j={style:"-webkit-box-shadow:none"});for(var B=0,v=p;B<s;B++)v=v.firstChild||i.create("DIV",j,v);e&&(setTimeout(function(){l.remove(a,k)},0),l.add(e,k))}else if(j.indexOf(".")!==-1)i.create("IMG",{src:j},p);else return null;l.add(p,
"mblDomButton");f.mblAndroidWorkaround!==!1&&d("android")>=2.2&&c.set(p,"webkitTransform","translate3d(0,0,0)");b&&c.set(p,b);return p};n.createIcon=function(a,b,d,e,f){if(a&&a.indexOf("mblDomButton")===0)d&&d.className.match(/(mblDomButton\w+)/)?l.remove(d,RegExp.$1):d=i.create("DIV"),d.title=e,l.add(d,a),n.createDomButton(d);else if(a&&a!=="none"){if(!d||d.nodeName!=="IMG")d=i.create("IMG",{alt:e});d.src=(a||"").replace("${theme}",n.currentTheme);n.setupIcon(d,b);f&&b&&(a=b.split(/[ ,]/),c.set(f,
{width:a[2]+"px",height:a[3]+"px"}))}f&&f.appendChild(d);return d};n._iw=f.mblIosWorkaround!==!1&&d("iphone");if(n._iw)n._iwBgCover=i.create("div");f.parseOnLoad&&b(90,function(){var a=h.body().getElementsByTagName("*"),b,d,c;d=a.length;for(b=0;b<d;b++)if((c=a[b].getAttribute("dojoType"))&&a[b].parentNode.getAttribute("lazy")=="true")a[b].setAttribute("__dojoType",c),a[b].removeAttribute("dojoType")});b(function(){n.detectScreenSize(!0);f.mblApplyPageStyles!==!1&&l.add(h.doc.documentElement,"mobile");
d("chrome")&&l.add(h.doc.documentElement,"dj_chrome");f.mblAndroidWorkaround!==!1&&d("android")>=2.2&&(f.mblAndroidWorkaroundButtonStyle!==!1&&i.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;}"},h.doc.head,"first"),d("android")<3?(c.set(h.doc.documentElement,"webkitTransform","translate3d(0,0,0)"),j.connect(null,"onfocus",null,function(){c.set(h.doc.documentElement,"webkitTransform",
"")}),j.connect(null,"onblur",null,function(){c.set(h.doc.documentElement,"webkitTransform","translate3d(0,0,0)")})):f.mblAndroid3Workaround!==!1&&c.set(h.doc.documentElement,{webkitBackfaceVisibility:"hidden",webkitPerspective:8E3}));var b=n.resizeAll;if(f.mblHideAddressBar!==!1&&navigator.appVersion.indexOf("Mobile")!=-1||f.mblForceHideAddressBar===!0)if(n.hideAddressBar(),f.mblAlwaysHideAddressBar===!0)b=n.hideAddressBar;j.connect(null,h.global.onorientationchange!==void 0&&!d("android")?"onorientationchange":
"onresize",null,b);var b=h.body().getElementsByTagName("*"),e,k=b.length,t;for(e=0;e<k;e++)if(t=b[e].getAttribute("__dojoType"))b[e].setAttribute("dojoType",t),b[e].removeAttribute("__dojoType");if(m.hash){var u=function(b){if(!b)return[];for(var d=b=a.findWidgets(b),c=0;c<d.length;c++)b=b.concat(u(d[c].containerNode));return b};j.subscribe("/dojo/hashchange",null,function(a){var b=n.currentView;if(b){var d=n._params;if(!d){var a=a?a:n._defaultView.id,d=u(b.domNode),c=1,g="slide";for(e=0;e<d.length;e++){var f=
d[e];if("#"+a==f.moveTo){g=f.transition;c=f instanceof n.Heading?-1:1;break}}d=[a,c,g]}b.performTransition.apply(b,d);n._params=null}})}h.body().style.visibility="visible"});a.getEnclosingWidget=function(b){for(;b;){var d=b.getAttribute&&b.getAttribute("widgetId");if(d)return a.byId(d);b=b._parentNode||b.parentNode}return null};return n})},"dojox/mobile/Heading":function(){define("dojox/mobile/Heading",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window",
"dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./View"],function(m,k,f,j,e,h,l,i,c,b,a,d,n){var g=j.getObject("dojox.mobile",!0);return f("dojox.mobile.Heading",[d,a,b],{back:"",href:"",moveTo:"",transition:"slide",label:"",iconBase:"",backProp:{className:"mblArrowButton"},tag:"H1",buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||e.doc.createElement(this.tag);this.domNode.className="mblHeading";
this.label||m.forEach(this.domNode.childNodes,function(a){if(a.nodeType==3){var b=j.trim(a.nodeValue);if(b)this.label=b,this.labelNode=l.create("SPAN",{innerHTML:b},a,"replace")}},this);if(!this.labelNode)this.labelNode=l.create("SPAN",null,this.domNode);this.labelNode.className="mblHeadingSpanTitle";this.labelDivNode=l.create("DIV",{className:"mblHeadingDivTitle",innerHTML:this.labelNode.innerHTML},this.domNode)},startup:function(){if(!this._started){var a=this.getParent&&this.getParent();if(!a||
!a.resize){var b=this;setTimeout(function(){b.resize()},0)}this.inherited(arguments)}},resize:function(){if(this._btn)this._btn.style.width=this._body.offsetWidth+this._head.offsetWidth+"px";if(this.labelNode){for(var a,b,d=this.containerNode.childNodes,c=d.length-1;c>=0;c--){var g=d[c];if(g.nodeType===1&&(!b&&h.contains(g,"mblToolBarButton")&&i.get(g,"float")==="right"&&(b=g),!a&&(h.contains(g,"mblToolBarButton")&&i.get(g,"float")==="left"||g===this._btn)))a=g}if(!this.labelNodeLen&&this.label)this.labelNode.style.display=
"inline",this.labelNodeLen=this.labelNode.offsetWidth,this.labelNode.style.display="";d=this.domNode.offsetWidth;h[d-Math.max(b?d-b.offsetLeft+5:0,a?a.offsetLeft+a.offsetWidth+5:0)*2>(this.labelNodeLen||0)?"add":"remove"](this.domNode,"mblHeadingCenterTitle")}m.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_setBackAttr:function(a){if(a){if(!this._btn){var b=l.create("DIV",this.backProp,this.domNode,"first"),d=l.create("DIV",{className:"mblArrowButtonHead"},b),c=l.create("DIV",{className:"mblArrowButtonBody mblArrowButtonText"},
b);this._body=c;this._head=d;this.backBtnNode=this._btn=b;this.connect(c,"onclick","onClick")}this.back=a;this._body.innerHTML=this._cv?this._cv(this.back):this.back}else l.destroy(this._btn),this._btn=null,this.back="";this.resize()},_setLabelAttr:function(a){this.label=a;this.labelNode.innerHTML=this.labelDivNode.innerHTML=this._cv?this._cv(a):a},findCurrentView:function(){for(var a=this;;){a=a.getParent();if(!a)return null;if(a instanceof n)break}return a},onClick:function(a){var b=this.domNode;
h.add(b,"mblArrowButtonSelected");setTimeout(function(){h.remove(b,"mblArrowButtonSelected")},1E3);if(this.back&&!this.moveTo&&!this.href&&history)history.back();else{var d=this.findCurrentView();if(d)d.clickedPosX=a.clientX,d.clickedPosY=a.clientY;this.goTo(this.moveTo,this.href)}},goTo:function(a,b){var d=this.findCurrentView();if(d)if(b)d.performTransition(null,-1,this.transition,this,function(){location.href=b});else if(g.app&&g.app.STAGE_CONTROLLER_ACTIVE)k.publish("/dojox/mobile/app/goback");
else{var e=c.byId(d.convertToId(a));if(e)for(e=e.getParent();d;){var n=d.getParent();if(e===n)break;d=n}d&&d.performTransition(a,-1,this.transition)}}})})},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(m){return m.dojox})},"dojox/mobile/RoundRectList":function(){define("dojox/mobile/RoundRectList",["dojo/_base/array","dojo/_base/declare","dojo/_base/window","dijit/_Contained","dijit/_Container","dijit/_WidgetBase"],function(m,k,f,j,e,h){return k("dojox.mobile.RoundRectList",
[h,e,j],{transition:"slide",iconBase:"",iconPos:"",select:"",stateful:!1,buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||f.doc.createElement("UL");this.domNode.className="mblRoundRectList"},resize:function(){m.forEach(this.getChildren(),function(e){e.resize&&e.resize()})},onCheckStateChanged:function(){},_setStatefulAttr:function(e){this.stateful=e;m.forEach(this.getChildren(),function(e){e.setArrow&&e.setArrow()})},deselectItem:function(e){e.deselect()},deselectAll:function(){m.forEach(this.getChildren(),
function(e){e.deselect&&e.deselect()})},selectItem:function(e){e.select()}})})},"dojox/mobile/RadioButton":function(){define("dojox/mobile/RadioButton",["dojo/_base/declare","dijit/form/_RadioButtonMixin","./CheckBox"],function(m,k,f){return m("dojox.mobile.RadioButton",[f,k],{_setTypeAttr:null,baseClass:"mblRadioButton"})})},"app/views/Map":function(){define("app/views/Map",["dojo/_base/declare","dojo/_base/Deferred","dijit/registry","dojo/dom","dojo/dom-class","dojo/on","dojo/_base/lang","dojo/window",
"dojo/query","app/views/GeoJSON","dojo/dom-construct"],function(m,k,f,j,e,h,l,i,c,b,a){return m("app.views.Map",null,{view:null,map:null,currentPage:null,previousView:null,infowindow:null,pageType:null,constructor:function(){this.view=f.byId("mapView");this._setupEventHandlers();var a={zoom:10,center:new google.maps.LatLng(53.3825,-6.24916),mapTypeId:google.maps.MapTypeId.ROADMAP,sensor:!0};this.map=new google.maps.Map(j.byId("map_canvas"),a);this.infowindow=new google.maps.InfoWindow},show:function(a,
b,g){this.pageType=b;this.populateData(g);this.view.show();this.fixHeight(this);if(this.pageType=="activityList"){a=c("#dojox_mobile_Heading_3 .mblTabButtonSelected");e.remove(a[0],"mblTabButtonSelected");e.add("mapBtn_map","mblTabButtonSelected");if(a=localStorage.getItem("game_activities"))viewCache.activityList.activityListStore=dojo.fromJson(a);this.displayActivityMarkers(viewCache.activityList.activityListStore)}else this.pageType=="activityDetail"?(console.error("STUB: Next line needs to tell where geoJSON for displayActivityDetail is coming from."),
displayActivityDetailMarkers()):console.error("No valid pageType set [activityList]")},populateData:function(a){if(this.previousView!==a)this.previousView=a,this.btnHandle&&this.btnHandle.pause()},_setupEventHandlers:function(){f.byId("listBtn_map").on("Click",l.hitch(this,function(){if(!this.pageType||this.pageType=="activityList"){var a=c("#dojox_mobile_Heading_1 .mblTabButtonSelected");a.length&&e.remove(a[0],"mblTabButtonSelected");e.add("activListBtn_actList","mblTabButtonSelected")}}));h(window,
dojo.global.orientationchange!==void 0&&!dojo.isAndroid?"orientationchange":"resize",this.fixHeight(this))},fixHeight:function(){var a=i.getBox(),b=c("#mapView"),a=i.getBox();b[0].style.height=a.h+"px";a=j.byId("map_canvas");google.maps.event.trigger(a,"resize")},displayActivityMarkers:function(a){var a=(new b(a)).parse(),c=new google.maps.LatLngBounds;if(a.length)for(var g=0;g<a.length;g++)a[g].setMap(this.map),c.extend(a[g].getPosition()),a[g].geojsonProperties&&this.setInfoWindow(a[g]);else a.setMap(this.map),
c.extend(a.getPosition()),a.geojsonProperties&&this.setInfoWindow(a);this.map.fitBounds(c)},displayActivityDetailMarkers:function(a){var a=(new b(a)).parse(),c=new google.maps.LatLngBounds;if(a.length)for(var g=0;g<a.length;g++)a[g].setMap(this.map),c.extend(a[g].getPosition()),a[g].geojsonProperties&&this.setInfoWindow(a[g]);else a.setMap(this.map),c.extend(a.getPosition()),a.geojsonProperties&&this.setInfoWindow(a);this.map.fitBounds(c)},setInfoWindow:function(b){google.maps.event.addListener(b,
"click",l.hitch(this,function(b,d){var c=a.create("div",{innerHTML:"<span id='"+b.id+"'>"+b.geojsonProperties.name+"</span>"});this.infowindow.setContent(c);this.infowindow.position=d.latLng;this.infowindow.open(this.map);h(c,"span:click",l.hitch(this,function(a){var b=a.target.id;this.view.performTransition("activityDetailView",1,"slide");for(a=0;a<viewCache.activityList.activityStore.features.length;a++)if(viewCache.activityList.activityStore.features[a].id===b){l.hitch(viewCache.activityList,"getActivityItemData",
viewCache.activityList.activityStore.features[a])();break}}))},b))}})})},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/kernel","./_base/declare","./_base/lang","./_base/array"],function(m,k,f,j){return m.declare("dojo.Stateful",null,{postscript:function(e){e&&f.mixin(this,e)},get:function(e){return this[e]},set:function(e,f){if(typeof e==="object"){for(var j in e)this.set(j,e[j]);return this}j=this[e];this[e]=f;this._watchCallbacks&&this._watchCallbacks(e,j,f);return this},watch:function(e,
f){var l=this._watchCallbacks;if(!l)var i=this,l=this._watchCallbacks=function(b,a,d,c){var g=function(c){if(c)for(var c=c.slice(),g=0,e=c.length;g<e;g++)try{c[g].call(i,b,a,d)}catch(n){console.error(n)}};g(l["_"+b]);c||g(l["*"])};!f&&typeof e==="function"?(f=e,e="*"):e="_"+e;var c=l[e];typeof c!=="object"&&(c=l[e]=[]);c.push(f);return{unwatch:function(){c.splice(j.indexOf(c,f),1)}}}})})},"dojo/touch":function(){define("dojo/touch",["./_base/kernel","./on","./has","./mouse"],function(m,k,f,j){function e(e){return function(f,
i){return k(f,e,i)}}f=f("touch");m.touch={press:e(f?"touchstart":"mousedown"),move:e(f?"touchmove":"mousemove"),release:e(f?"touchend":"mouseup"),cancel:f?e("touchcancel"):j.leave};return m.touch})},"dojox/mobile/Overlay":function(){define("dojox/mobile/Overlay",["dojo/_base/declare","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/window","dijit/_WidgetBase","dojo/_base/array","dijit/registry"],function(m,k,f,j,e,h,l,i,c,b,a){return m("dojox.mobile.Overlay",
c,{baseClass:"mblOverlay mblOverlayHidden",show:function(d){b.forEach(a.findWidgets(this.domNode),function(a){a&&a.height=="auto"&&typeof a.resize=="function"&&a.resize()});var c,g,o=k.hitch(this,function(){l.set(this.domNode,{position:"",top:"auto",bottom:"0px"});g=h.position(this.domNode);c=i.getBox();if(g.y+g.h!=c.h||f("android")<3)g.y=c.t+c.h-g.h,l.set(this.domNode,{position:"absolute",top:g.y+"px",bottom:"auto"})});o();d&&(d=h.position(d),g.y<d.y&&(j.global.scrollBy(0,d.y+d.h-g.y),o()));e.replace(this.domNode,
["mblCoverv","mblIn"],["mblOverlayHidden","mblRevealv","mblOut","mblReverse"]);var m=this.domNode;setTimeout(function(){e.add(m,"mblTransition")},100);var t=null;this._moveHandle=this.connect(j.doc.documentElement,"ontouchmove",function(){t&&clearTimeout(t);t=setTimeout(function(){o();t=null},0)})},hide:function(){if(this._moveHandle)this.disconnect(this._moveHandle),this._moveHandle=null;if(f("webkit")){var a=this.connect(this.domNode,"webkitTransitionEnd",function(){this.disconnect(a);e.replace(this.domNode,
["mblOverlayHidden"],["mblRevealv","mblOut","mblReverse","mblTransition"])});e.replace(this.domNode,["mblRevealv","mblOut","mblReverse"],["mblCoverv","mblIn","mblTransition"]);var b=this.domNode;setTimeout(function(){e.add(b,"mblTransition")},100)}else e.replace(this.domNode,["mblOverlayHidden"],["mblCoverv","mblIn","mblRevealv","mblOut","mblReverse"])},onBlur:function(){return!1}})})},"dojox/mobile/TextBox":function(){define("dojox/mobile/TextBox",["dojo/_base/declare","dojo/dom-construct","dijit/_WidgetBase",
"dijit/form/_FormValueMixin","dijit/form/_TextBoxMixin"],function(m,k,f,j,e){return m("dojox.mobile.TextBox",[f,j,e],{baseClass:"mblTextBox",_setTypeAttr:null,_setPlaceHolderAttr:"textbox",buildRendering:function(){if(!this.srcNodeRef)this.srcNodeRef=k.create("input",{type:this.type});this.inherited(arguments);this.textbox=this.focusNode=this.domNode},postCreate:function(){this.inherited(arguments);this.connect(this.textbox,"onfocus","_onFocus");this.connect(this.textbox,"onblur","_onBlur")}})})},
"dojo/dom-prop":function(){define("dojo/dom-prop",["exports","./_base/kernel","./_base/sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(m,k,f,j,e,h,l,i){var c={},b=0,a=k._scopeName+"attrid";m.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};m.get=function(a,b){var a=e.byId(a),c=b.toLowerCase();return a[m.names[c]||b]};m.set=function(d,f,g){d=
e.byId(d);if(arguments.length==2&&typeof f!="string"){for(var o in f)m.set(d,o,f[o]);return d}o=f.toLowerCase();o=m.names[o]||f;if(o=="style"&&typeof g!="string")return h.style(d,g),d;if(o=="innerHTML")return d[o]=g,d;if(j.isFunction(g)){var l=d[a];l||(l=b++,d[a]=l);c[l]||(c[l]={});var k=c[l][o];if(k)i.disconnect(k);else try{delete d[o]}catch(u){}g?c[l][o]=i.connect(d,o,g):d[o]=null;return d}d[o]=g;return d}})},"dojox/gesture/Base":function(){define("dojox/gesture/Base",["dojo/_base/kernel","dojo/_base/declare",
"dojo/_base/array","dojo/_base/lang","dojo/dom","dojo/on","dojo/touch","dojo/has","../main"],function(m,k,f,j,e,h,l,i,c){m.experimental("dojox.gesture.Base");j.getObject("gesture",!0,c);return k(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,_elements:null,constructor:function(b){j.mixin(this,b);this.init()},init:function(){this._elements=[];if(!i("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,"] is only supported on touch devices!");else{var b=this.defaultEvent;this.call=
this._handle(b);this._events=[b];f.forEach(this.subEvents,function(a){this[a]=this._handle(b+"."+a);this._events.push(b+"."+a)},this)}},_handle:function(b){var a=this;return function(d,c){var g=arguments;g.length>2&&(d=g[1],c=g[2]);if(d&&(d.nodeType||d.attachEvent||d.addEventListener)){var e=a._add(d,b,c);return{remove:function(){e.remove();a._remove(d,b)}}}else return h(d,b,c)}},_add:function(b,a,d){var c=this._getGestureElement(b);if(!c){var c={target:b,data:{},handles:{}},g=j.hitch(this,"_process",
c,"press"),e=j.hitch(this,"_process",c,"move"),f=j.hitch(this,"_process",c,"release"),i=j.hitch(this,"_process",c,"cancel"),k=c.handles;this.touchOnly?(k.press=h(b,"touchstart",g),k.move=h(b,"touchmove",e),k.release=h(b,"touchend",f),k.cancel=h(b,"touchcancel",i)):(k.press=l.press(b,g),k.move=l.move(b,e),k.release=l.release(b,f),k.cancel=l.cancel(b,i));this._elements.push(c)}c.handles[a]=!c.handles[a]?1:++c.handles[a];return h(b,a,d)},_getGestureElement:function(b){for(var a=0,d;a<this._elements.length;a++)if(d=
this._elements[a],d.target===b)return d},_process:function(b,a,d){d._locking=d._locking||{};!d._locking[this.defaultEvent]&&!this.isLocked(d.currentTarget)&&(d.preventDefault(),d._locking[this.defaultEvent]=!0,this[a](b.data,d))},press:function(){},move:function(){},release:function(){},cancel:function(){},fire:function(b,a){if(b&&a)a.bubbles=!0,a.cancelable=!0,h.emit(b,a.type,a)},_remove:function(b,a){var d=this._getGestureElement(b);if(d&&d.handles){d.handles[a]--;var c=d.handles;f.some(this._events,
function(a){return c[a]>0})||(this._cleanHandles(c),d=f.indexOf(this._elements,d),d>=0&&this._elements.splice(d,1))}},_cleanHandles:function(b){for(var a in b)b[a].remove&&b[a].remove(),delete b[a]},lock:function(b){this._lock=b},unLock:function(){this._lock=null},isLocked:function(b){if(!this._lock||!b)return!1;return this._lock!==b&&e.isDescendant(b,this._lock)},destroy:function(){f.forEach(this._elements,function(b){this._cleanHandles(b.handles)},this);this._elements=null}})})},"dijit/_base/manager":function(){define("dijit/_base/manager",
["dojo/_base/array","dojo/_base/config","../registry",".."],function(m,k,f,j){m.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(e){j[e]=f[e]});j.defaultDuration=k.defaultDuration||200;return j})},"app/views/ActivityList":function(){define("app/views/ActivityList",["dojo/_base/declare","dijit/registry","dojo/_base/lang","dojo/on","dojo/_base/Deferred","dojox/mobile/ProgressIndicator","dojo/_base/xhr","dojo/_base/json","dojox/mobile/ListItem","app/views/TaskList",
"app/views/Map","dojo/dom","dojo/dom-style"],function(m,k,f,j,e,h,l,i,c,b,a,d,n){return m("app.views.ActivityList",null,{view:null,activityRectList:null,activityListStore:null,constructor:function(){var a=this.startProgressSpinner();this.view=k.byId("activityListView");var b=localStorage.getItem("game_activities");if(b)this.activityListStore=i.fromJson(b),e.when(this._populateData(this.activityListStore),function(){a.stop()});this._setupEventHandlers();localStorage.getItem("itemsViewed")||(localStorage.setItem("itemsFinished",
"0"),localStorage.setItem("itemsViewed","0"),localStorage.setItem("pointsAccumulated","0"));j(d.byId("ScoreButtonInActivityListView"),"click",function(){d.byId("scoreViewAmountViewed").innerHTML=localStorage.getItem("itemsViewed");d.byId("scoreViewAmountDone").innerHTML=localStorage.getItem("itemsFinished")});j(d.byId("ScoreButtonInActivityListView"),"click",f.hitch(this,function(){d.byId("scoreViewScoreSpan").innerHTML=localStorage.getItem("pointsAccumulated")}))},startProgressSpinner:function(){var a=
h.getInstance();d.byId("progressSpinnerDiv").appendChild(a.domNode);a.start();return a},getActivitesForNewGame:function(a){var b=new e,d=new e;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(a){d.resolve(a.coords)});else return console.log("navigator not supported"),!1;e.when(d,f.hitch(this,function(d){l.get({url:"/TreasureHuntWeb/rest/game",content:{categories:a,lon_lat:d.longitude+" "+d.latitude},handleAs:"json",load:f.hitch(this,function(a){this._populateData(a);localStorage.setItem("game_activities",
i.toJson(a));b.resolve()})})}));return b},_populateData:function(a){this.activityRectList=k.byId("activityList");n.set(this.activityRectList.domNode,"visibility","hidden");this.activityStore=a;for(var b=0;b<a.features.length;b++){var d=a.features[b];this.activityRectList.addChild(new c({id:d.id,label:d.properties.name,icon:"img/h/"+d.properties.category+".png",clickable:!0,onClick:f.hitch(this,function(a){var b;this.view.performTransition("activityDetailView",1,"slide");for(b=0;b<this.activityStore.features.length;b++)if(this.activityStore.features[b].id===
a){this.getActivityItemData(this.activityStore.features[b]);break}},d.id)}))}n.set(this.activityRectList.domNode,"visibility","visible")},removeData:function(){this.activityRectList.destroyDescendants();this.activityStore=null;localStorage.removeItem("itemsFinished");localStorage.removeItem("itemsViewed");localStorage.removeItem("pointsAccumulated");for(var a=0;a<viewCache.activityDetailViews.length;a++)viewCache.activityDetailViews[a].destroy()},getActivityItemData:function(a){if(viewCache.activityDetailViews&&
viewCache.activityDetailViews[a.id])viewCache.activityDetailViews[a.id].show();else{if(!viewCache.activityDetailViews)viewCache.activityDetailViews={};var d=localStorage.getItem("activityDetails_"+a.id);if(d)return d=i.fromJson(d),viewCache.activityDetailViews[a.id]=new b(k.byId("activityDetailView"),{id:a.id,title:a.properties.name,imgSource:a.properties.imgSource,tasks:d.tasks}),viewCache.activityDetailViews[a.id].show(),null;return l.get({url:"/TreasureHuntWeb/rest/tasks",content:{facilityid:a.id},
handleAs:"json",load:f.hitch(this,function(d){viewCache.activityDetailViews[a.id]=new b(k.byId("activityDetailView"),{id:a.id,title:a.properties.name,imgSource:a.properties.imgSource,tasks:d});viewCache.activityDetailViews[a.id].show()}),error:function(a){console.error("Error retrieving activity data ",a)}})}},show:function(){this.view.show();k.byId("dojox_mobile_Heading_3").resize()},_setupEventHandlers:function(){var b=k.byId("activListBtn_actList"),d=k.byId("listBtn_map"),c=k.byId("activMapBtn_actList");
if(!viewCache.mapView)viewCache.mapView=new a;b.on("Click",f.hitch(this,this.show));d.on("Click",f.hitch(this,this.show));c.on("Click",f.hitch(this,this._showMapView));b=k.byId("activityListHeading");j(b.backBtnNode,"click",function(){viewCache.setup.destroy_game()})},_showMapView:function(){viewCache.mapView.show(this.activityStore,"activityList",this)}})})},"dojox/mobile/View":function(){define("dojox/mobile/View",["dojo/_base/kernel","dojo/_base/array","dojo/_base/config","dojo/_base/connect",
"dojo/_base/declare","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./ViewController","./transition"],function(m,k,f,j,e,h,l,i,c,b,a,d,n,g,o,q,t,u,p){var r=h.getObject("dojox.mobile",!0);return e("dojox.mobile.View",[t,q,o],{selected:!1,keepScrollPos:!0,constructor:function(a,d){if(d)b.byId(d).style.visibility="hidden";this._aw=
l("android")>=2.2&&l("android")<3},buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||i.doc.createElement("DIV");this.domNode.className="mblView";this.connect(this.domNode,"webkitAnimationEnd","onAnimationEnd");this.connect(this.domNode,"webkitAnimationStart","onAnimationStart");f.mblCSS3Transition||this.connect(this.domNode,"webkitTransitionEnd","onAnimationEnd");var a=location.href.match(/#(\w+)([^\w=]|$)/)?RegExp.$1:null;this._visible=this.selected&&!a||this.id==a;if(this.selected)r._defaultView=
this},startup:function(){if(!this._started){for(var b=[],d=this.domNode.parentNode.childNodes,c=!1,e=0;e<d.length;e++){var f=d[e];f.nodeType===1&&a.contains(f,"mblView")&&(b.push(f),c=c||g.byNode(f)._visible)}var n=this._visible;if(b.length===1||!c&&b[0]===this.domNode)n=!0;var h=this;setTimeout(function(){n?(r.currentView=h,h.onStartView(),j.publish("/dojox/mobile/startView",[h])):h.domNode.style.display="none";if(h.domNode.style.visibility!="visible")h.domNode.style.visibility="visible";var a=h.getParent&&
h.getParent();(!a||!a.resize)&&h.resize()},0);this.inherited(arguments)}},resize:function(){k.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},onStartView:function(){},onBeforeTransitionIn:function(){},onAfterTransitionIn:function(){},onBeforeTransitionOut:function(){},onAfterTransitionOut:function(){},_saveState:function(a,b,d,c,e){this._context=c;this._method=e;d=="none"&&(d=null);this._moveTo=a;this._dir=b;this._transition=d;this._arguments=h._toArray(arguments);this._args=[];if(c||
e)for(var g=5;g<arguments.length;g++)this._args.push(arguments[g])},_fixViewState:function(b){for(var d=this.domNode.parentNode.childNodes,c=0;c<d.length;c++){var e=d[c];if(e.nodeType===1&&a.contains(e,"mblView"))e.className="mblView"}b.className="mblView"},convertToId:function(a){if(typeof a=="string")return a.match(/^#?([^&?]+)/),RegExp.$1;return a},performTransition:function(a,d,c){if(a!=="#")if(m.hash&&typeof a=="string"&&a.charAt(0)=="#"&&!r._params){r._params=[];for(var e=0;e<arguments.length;e++)r._params.push(arguments[e]);
m.hash(a)}else{this._saveState.apply(this,arguments);var l;if(a)l=this.convertToId(a);else{if(!this._dummyNode)this._dummyNode=i.doc.createElement("DIV"),i.body().appendChild(this._dummyNode);l=this._dummyNode}var k=this.domNode,p=k.offsetTop;if(l=this.toNode=b.byId(l)){l.style.visibility=this._aw?"visible":"hidden";l.style.display="";this._fixViewState(l);if(e=g.byNode(l)){if(f.mblAlwaysResizeOnTransition||!e._resized)r.resizeAll(null,e),e._resized=!0;if(c&&c!="none")e.containerNode.style.paddingTop=
p+"px";e.movedFrom=k.id}this.onBeforeTransitionOut.apply(this,arguments);j.publish("/dojox/mobile/beforeTransitionOut",[this].concat(h._toArray(arguments)));if(e){if(this.keepScrollPos&&!this.getParent()){p=i.body().scrollTop||i.doc.documentElement.scrollTop||i.global.pageYOffset||0;k._scrollTop=p;var o=d==1?0:l._scrollTop||0;l.style.top="0px";if(p>1||o!==0)k.style.top=o-p+"px",f.mblHideAddressBar!==!1&&setTimeout(function(){i.global.scrollTo(0,o||1)},0)}else l.style.top="0px";e.onBeforeTransitionIn.apply(e,
arguments);j.publish("/dojox/mobile/beforeTransitionIn",[e].concat(h._toArray(arguments)))}if(!this._aw)l.style.display="none",l.style.visibility="visible";r._iw&&r.scrollable?(e=r.getScreenSize(),i.body().appendChild(r._iwBgCover),n.set(r._iwBgCover,{position:"absolute",top:"0px",left:"0px",height:e.h+1+"px",width:e.w+"px",backgroundColor:n.get(i.body(),"background-color"),zIndex:-1E4,display:""}),n.set(l,{position:"absolute",zIndex:-10001,visibility:"visible",display:""}),setTimeout(h.hitch(this,
function(){this._doTransition(k,l,c,d)}),80)):this._doTransition(k,l,c,d)}else console.log("dojox.mobile.View#performTransition: destination view not found: "+a)}},_toCls:function(a){return"mbl"+a.charAt(0).toUpperCase()+a.substring(1)},_doTransition:function(b,e,l,j){var k=j==-1?" mblReverse":"";if(r._iw&&r.scrollable)n.set(e,{position:"",zIndex:""}),i.body().removeChild(r._iwBgCover);else if(!this._aw)e.style.display="";if(!l||l=="none")this.domNode.style.display="none",this.invokeCallback();else if(f.mblCSS3Transition)c.when(p,
h.hitch(this,function(a){var d=n.get(e,"position");n.set(e,"position","absolute");c.when(a(b,e,{transition:l,reverse:j===-1?!0:!1}),h.hitch(this,function(){n.set(e,"position",d);this.invokeCallback()}))}));else{var o=this._toCls(l);a.add(b,o+" mblOut"+k);a.add(e,o+" mblIn"+k);setTimeout(function(){a.add(b,"mblTransition");a.add(e,"mblTransition")},100);var k=o="50% 50%",m;l.indexOf("swirl")!=-1||l.indexOf("zoom")!=-1?(o=this.keepScrollPos&&!this.getParent()?i.body().scrollTop||i.doc.documentElement.scrollTop||
i.global.pageYOffset||0:-d.position(b,!0).y,m=i.global.innerHeight/2+o,o="50% "+m+"px",k="50% "+m+"px"):l.indexOf("scale")!=-1&&(o=d.position(b,!0),k=(this.clickedPosX!==void 0?this.clickedPosX:i.global.innerWidth/2)-o.x,o=this.keepScrollPos&&!this.getParent()?i.body().scrollTop||i.doc.documentElement.scrollTop||i.global.pageYOffset||0:-o.y,m=(this.clickedPosY!==void 0?this.clickedPosY:i.global.innerHeight/2)+o,o=k+"px "+m+"px",k=k+"px "+m+"px");n.set(b,{webkitTransformOrigin:o});n.set(e,{webkitTransformOrigin:k})}r.currentView=
g.byNode(e)},onAnimationStart:function(){},onAnimationEnd:function(b){var d=b.animationName||b.target.className;if(!(d.indexOf("Out")===-1&&d.indexOf("In")===-1&&d.indexOf("Shrink")===-1)){var c=!1;a.contains(this.domNode,"mblOut")?(c=!0,this.domNode.style.display="none",a.remove(this.domNode,[this._toCls(this._transition),"mblIn","mblOut","mblReverse"])):this.containerNode.style.paddingTop="";n.set(this.domNode,{webkitTransformOrigin:""});if(d.indexOf("Shrink")!==-1)b=b.target,b.style.display="none",
a.remove(b,"mblCloseContent");c&&this.invokeCallback();this.domNode&&(this.domNode.className="mblView");this.clickedPosX=this.clickedPosY=void 0}},invokeCallback:function(){this.onAfterTransitionOut.apply(this,this._arguments);j.publish("/dojox/mobile/afterTransitionOut",[this].concat(this._arguments));var a=g.byNode(this.toNode);if(a)a.onAfterTransitionIn.apply(a,this._arguments),j.publish("/dojox/mobile/afterTransitionIn",[a].concat(this._arguments)),a.movedFrom=void 0;var a=this._context,b=this._method;
if(a||b)b||(b=a,a=null),a=a||i.global,typeof b=="string"?a[b].apply(a,this._args):b.apply(a,this._args)},getShowingView:function(){for(var b=this.domNode.parentNode.childNodes,d=0;d<b.length;d++){var c=b[d];if(c.nodeType===1&&a.contains(c,"mblView")&&n.get(c,"display")!=="none")return g.byNode(c)}return null},show:function(){var a=this.getShowingView();if(a)a.domNode.style.display="none";this.domNode.style.display="";r.currentView=this}})})},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array",
"dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/sniff","./_base/manager","."],function(m,k,f,j,e,h,l,i,c){var b=c._isElementShown=function(a){var b=h.get(a);return b.visibility!="hidden"&&b.visibility!="collapsed"&&b.display!="none"&&e.get(a,"type")!="hidden"};c.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return e.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;
try{var c=a.contentDocument;if("designMode"in c&&c.designMode=="on")return!0;b=c.body}catch(f){try{b=a.contentWindow.document.body}catch(h){return!1}}return b&&(b.contentEditable=="true"||b.firstChild&&b.firstChild.contentEditable=="true");default:return a.contentEditable=="true"}};var a=c.isTabNavigable=function(a){return e.get(a,"disabled")?!1:e.has(a,"tabIndex")?e.get(a,"tabIndex")>=0:c.hasDefaultTabStop(a)};c._getTabNavigable=function(d){function c(a){return a&&a.tagName.toLowerCase()=="input"&&
a.type&&a.type.toLowerCase()=="radio"&&a.name&&a.name.toLowerCase()}var g,f,h,l,i,j,k={},m=function(d){for(d=d.firstChild;d;d=d.nextSibling)if(d.nodeType==1&&b(d)){if(a(d)){var v=e.get(d,"tabIndex");if(!e.has(d,"tabIndex")||v==0)g||(g=d),f=d;else if(v>0){if(!h||v<l)l=v,h=d;if(!i||v>=j)j=v,i=d}v=c(d);e.get(d,"checked")&&v&&(k[v]=d)}d.nodeName.toUpperCase()!="SELECT"&&m(d)}};b(d)&&m(d);return{first:k[c(g)]||g,last:k[c(f)]||f,lowest:k[c(h)]||h,highest:k[c(i)]||i}};c.getFirstInTabbingOrder=function(a){a=
c._getTabNavigable(j.byId(a));return a.lowest?a.lowest:a.first};c.getLastInTabbingOrder=function(a){a=c._getTabNavigable(j.byId(a));return a.last?a.last:a.highest};return{hasDefaultTabStop:c.hasDefaultTabStop,isTabNavigable:c.isTabNavigable,_getTabNavigable:c._getTabNavigable,getFirstInTabbingOrder:c.getFirstInTabbingOrder,getLastInTabbingOrder:c.getLastInTabbingOrder}})},"dojox/gesture/tap":function(){define("dojox/gesture/tap",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base",
"../main"],function(m,k,f,j,e){m.experimental("dojox.gesture.tap");m=k(j,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(e,l){if(l.touches&&l.touches.length>=2)delete e.context;else{var i=l.target;this._initTap(e,l);e.tapTimeOut=setTimeout(f.hitch(this,function(){this._isTap(e,l)&&this.fire(i,{type:"tap.hold"});delete e.context}),this.holdThreshold)}},release:function(e,f){if(e.context&&this._isTap(e,f))switch(e.context.c){case 1:this.fire(f.target,
{type:"tap"});break;case 2:this.fire(f.target,{type:"tap.doubletap"})}clearTimeout(e.tapTimeOut)},_initTap:function(e,f){if(!e.context)e.context={x:0,y:0,t:0,c:0};var i=(new Date).getTime();i-e.context.t<=this.doubleTapTimeout?e.context.c++:(e.context.c=1,e.context.x=f.screenX,e.context.y=f.screenY);e.context.t=i},_isTap:function(e,f){var i=Math.abs(e.context.y-f.screenY);return Math.abs(e.context.x-f.screenX)<=this.tapRadius&&i<=this.tapRadius}});e.gesture.tap=new m;e.gesture.tap.Tap=m;return e.gesture.tap})},
"dojox/mobile/ListItem":function(){define("dojox/mobile/ListItem",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/has","./common","./_ItemBase","./TransitionEvent"],function(m,k,f,j,e,h,l,i,c,b){return f("dojox.mobile.ListItem",c,{rightText:"",rightIcon:"",rightIcon2:"",anchorLabel:!1,noArrow:!1,selected:!1,checked:!1,arrowClass:"mblDomButtonArrow",checkClass:"mblDomButtonCheck",variableHeight:!1,rightIconTitle:"",rightIcon2Title:"",
btnClass:"",btnClass2:"",postMixInProperties:function(){if(this.btnClass)this.rightIcon=this.btnClass;this._setBtnClassAttr=this._setRightIconAttr;this._setBtnClass2Attr=this._setRightIcon2Attr},buildRendering:function(){this.inherited(arguments);this.domNode.className="mblListItem"+(this.selected?" mblItemSelected":"");var a=this.box=h.create("DIV");a.className="mblListItemTextBox";if(this.anchorLabel)a.style.cursor="pointer";var b=this.srcNodeRef;if(b&&!this.label){this.label="";for(var c=0,e=b.childNodes.length;c<
e;c++){var f=b.firstChild;if(f.nodeType===3&&j.trim(f.nodeValue)!=="")f.nodeValue=this._cv?this._cv(f.nodeValue):f.nodeValue,this.labelNode=h.create("SPAN",{className:"mblListItemLabel"}),this.labelNode.appendChild(f),f=this.labelNode;a.appendChild(f)}}if(!this.labelNode)this.labelNode=h.create("SPAN",{className:"mblListItemLabel"},a);if(this.anchorLabel)a.style.display="inline";b=this.anchorNode=h.create("A");b.className="mblListItemAnchor";this.domNode.appendChild(b);b.appendChild(a)},startup:function(){if(!this._started){this.inheritParams();
var a=this.getParent();if(this.moveTo||this.href||this.url||this.clickable||a&&a.select)this._onClickHandle=this.connect(this.anchorNode,"onclick","onClick");this.setArrow();if(e.contains(this.domNode,"mblVariableHeight"))this.variableHeight=!0;this.variableHeight&&(e.add(this.domNode,"mblVariableHeight"),setTimeout(j.hitch(this,"layoutVariableHeight")));this.set("icon",this.icon);!this.checked&&this.checkClass.indexOf(",")!==-1&&this.set("checked",this.checked);this.inherited(arguments)}},resize:function(){this.variableHeight&&
this.layoutVariableHeight()},onClick:function(a){if(!e.contains(a.currentTarget.parentNode,"mblItemSelected")){if(this.anchorLabel)for(var d=a.target;d.tagName!=="LI";d=d.parentNode)if(d.className=="mblListItemTextBox"){e.add(d,"mblListItemTextBoxSelected");setTimeout(function(){e.remove(d,"mblListItemTextBoxSelected")},l("android")?300:1E3);this.onAnchorLabelClicked(a);return}var c=this.getParent();c.select&&(c.select==="single"?this.checked||this.set("checked",!0):c.select==="multiple"&&this.set("checked",
!this.checked));this.select();if(this.href&&this.hrefTarget)i.openWindow(this.href,this.hrefTarget);else{var g;if(this.moveTo||this.href||this.url||this.scene)g={moveTo:this.moveTo,href:this.href,url:this.url,scene:this.scene,transition:this.transition,transitionDir:this.transitionDir};else if(this.transitionOptions)g=this.transitionOptions;if(g)return this.setTransitionPos(a),(new b(this.domNode,g,a)).dispatch()}}},select:function(){var a=this.getParent();if(a.stateful)a.deselectAll();else{var b=
this;setTimeout(function(){b.deselect()},l("android")?300:1E3)}e.add(this.domNode,"mblItemSelected")},deselect:function(){e.remove(this.domNode,"mblItemSelected")},onAnchorLabelClicked:function(){},layoutVariableHeight:function(){var a=this.anchorNode.offsetHeight;if(a!==this.anchorNodeHeight)this.anchorNodeHeight=a,m.forEach([this.rightTextNode,this.rightIcon2Node,this.rightIconNode,this.iconNode],function(b){if(b)b.style.marginTop=Math.round((a-b.offsetHeight)/2)+"px"})},setArrow:function(){if(!this.checked){var a=
"",b=this.getParent();if(this.moveTo||this.href||this.url||this.clickable)if(!this.noArrow&&(!b||!b.stateful))a=this.arrowClass;a&&this._setRightIconAttr(a)}},_setIconAttr:function(a){if(this.getParent()){this.icon=a;var b=this.anchorNode;if(this.iconNode)h.empty(this.iconNode);else if(a)this.iconNode=h.create("DIV",{className:"mblListItemIcon"},this.rightIconNode||this.rightIcon2Node||this.rightTextNode||this.box,"before");a&&a!=="none"?(i.createIcon(a,this.iconPos,null,this.alt,this.iconNode),this.iconPos&&
e.add(this.iconNode.firstChild,"mblListItemSpriteIcon"),e.remove(b,"mblListItemAnchorNoIcon")):e.add(b,"mblListItemAnchorNoIcon")}},_setCheckedAttr:function(a){var b=this.getParent();b&&b.select==="single"&&a&&m.forEach(b.getChildren(),function(a){a.set("checked",!1)});this._setRightIconAttr(this.checkClass);var c=this.rightIconNode.childNodes;c.length===1?this.rightIconNode.style.display=a?"":"none":(c[0].style.display=a?"":"none",c[1].style.display=!a?"":"none");e.toggle(this.domNode,"mblListItemChecked",
a);if(b&&this.checked!==a)b.onCheckStateChanged(this,a);this.checked=a},_setRightTextAttr:function(a){if(!this.rightTextNode)this.rightTextNode=h.create("DIV",{className:"mblListItemRightText"},this.box,"before");this.rightText=a;this.rightTextNode.innerHTML=this._cv?this._cv(a):a},_setRightIconAttr:function(a){this.rightIconNode?h.empty(this.rightIconNode):this.rightIconNode=h.create("DIV",{className:"mblListItemRightIcon"},this.rightIcon2Node||this.rightTextNode||this.box,"before");this.rightIcon=
a;var b=(a||"").split(/,/);b.length===1?i.createIcon(a,null,null,this.rightIconTitle,this.rightIconNode):(i.createIcon(b[0],null,null,this.rightIconTitle,this.rightIconNode),i.createIcon(b[1],null,null,this.rightIconTitle,this.rightIconNode))},_setRightIcon2Attr:function(a){this.rightIcon2Node?h.empty(this.rightIcon2Node):this.rightIcon2Node=h.create("DIV",{className:"mblListItemRightIcon2"},this.rightTextNode||this.box,"before");this.rightIcon2=a;i.createIcon(a,null,null,this.rightIcon2Title,this.rightIcon2Node)},
_setLabelAttr:function(a){this.label=a;this.labelNode.innerHTML=this._cv?this._cv(a):a}})})},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","."],function(m,k,f,j,e,h,l){function i(c,b,a,d){var f=h.getBox();(!c.parentNode||String(c.parentNode.tagName).toLowerCase()!="body")&&e.body().appendChild(c);var g=null;m.some(b,function(b){var e=b.corner,h=b.pos,i=0,l={w:{L:f.l+f.w-h.x,R:h.x-f.l,M:f.w}[e.charAt(1)],
h:{T:f.t+f.h-h.y,B:h.y-f.t,M:f.h}[e.charAt(0)]};a&&(i=a(c,b.aroundCorner,e,l,d),i=typeof i=="undefined"?0:i);var j=c.style,o=j.display,m=j.visibility;if(j.display=="none")j.visibility="hidden",j.display="";var z=k.getMarginBox(c);j.display=o;j.visibility=m;o={L:h.x,R:h.x-z.w,M:Math.max(f.l,Math.min(f.l+f.w,h.x+(z.w>>1))-z.w)}[e.charAt(1)];m={T:h.y,B:h.y-z.h,M:Math.max(f.t,Math.min(f.t+f.h,h.y+(z.h>>1))-z.h)}[e.charAt(0)];h=Math.max(f.l,o);j=Math.max(f.t,m);o=Math.min(f.l+f.w,o+z.w)-h;m=Math.min(f.t+
f.h,m+z.h)-j;i+=z.w-o+(z.h-m);if(g==null||i<g.overflow)g={corner:e,aroundCorner:b.aroundCorner,x:h,y:j,w:o,h:m,overflow:i,spaceAvailable:l};return!i});g.overflow&&a&&a(c,g.aroundCorner,g.corner,g.spaceAvailable,d);var b=k.isBodyLtr(),i=c.style;i.top=g.y+"px";i[b?"left":"right"]=(b?g.x:f.w-g.x-g.w)+"px";i[b?"right":"left"]="auto";return g}return l.place={at:function(c,b,a,d){a=m.map(a,function(a){var c={corner:a,pos:{x:b.x,y:b.y}};d&&(c.pos.x+=a.charAt(1)=="L"?d.x:-d.x,c.pos.y+=a.charAt(0)=="T"?d.y:
-d.y);return c});return i(c,a)},around:function(c,b,a,d,e){function g(a,b){v.push({aroundCorner:a,corner:b,pos:{x:{L:p,R:p+s,M:p+(s>>1)}[a.charAt(1)],y:{T:r,B:r+B,M:r+(B>>1)}[a.charAt(0)]}})}var h=typeof b=="string"||"offsetWidth"in b?k.position(b,!0):b;if(b.parentNode)for(b=b.parentNode;b&&b.nodeType==1&&b.nodeName!="BODY";){var l=k.position(b,!0),t=f.getComputedStyle(b).overflow;if(t=="hidden"||t=="auto"||t=="scroll"){var t=Math.min(h.y+h.h,l.y+l.h),u=Math.min(h.x+h.w,l.x+l.w);h.x=Math.max(h.x,
l.x);h.y=Math.max(h.y,l.y);h.h=t-h.y;h.w=u-h.x}b=b.parentNode}var p=h.x,r=h.y,s="w"in h?h.w:h.w=h.width,B="h"in h?h.h:(j.deprecated("place.around: dijit.place.__Rectangle: { x:"+p+", y:"+r+", height:"+h.height+", width:"+s+" } has been deprecated.  Please use { x:"+p+", y:"+r+", h:"+h.height+", w:"+s+" }","","2.0"),h.h=h.height),v=[];m.forEach(a,function(a){var b=d;switch(a){case "above-centered":g("TM","BM");break;case "below-centered":g("BM","TM");break;case "after":b=!b;case "before":g(b?"ML":
"MR",b?"MR":"ML");break;case "below-alt":b=!b;case "below":g(b?"BL":"BR",b?"TL":"TR");g(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":g(b?"TL":"TR",b?"BL":"BR");g(b?"TR":"TL",b?"BR":"BL");break;default:g(a.aroundCorner,a.corner)}});c=i(c,v,e,{w:s,h:B});c.aroundNodePos=h;return c}}})},"dijit/form/_CheckBoxMixin":function(){define("dijit/form/_CheckBoxMixin",["dojo/_base/declare","dojo/dom-attr","dojo/_base/event"],function(m,k,f){return m("dijit.form._CheckBoxMixin",null,{type:"checkbox",
value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(f){this._set("readOnly",f);k.set(this.focusNode,"readOnly",f);this.focusNode.setAttribute("aria-readonly",f)},_setLabelAttr:void 0,postMixInProperties:function(){if(this.value=="")this.value="on";this.inherited(arguments)},reset:function(){this.inherited(arguments);this._set("value",this.params.value||"on");k.set(this.focusNode,"value",this.value)},_onClick:function(j){if(this.readOnly)return f.stop(j),!1;return this.inherited(arguments)}})})},
"dojox/mobile/Button":function(){define("dojox/mobile/Button",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dijit/_WidgetBase","dijit/form/_ButtonMixin","dijit/form/_FormWidgetMixin"],function(m,k,f,j,e,h,l){return k("dojox.mobile.Button",[e,l,h],{baseClass:"mblButton",_setTypeAttr:null,duration:1E3,_onClick:function(){var e=this.inherited(arguments);if(e&&this.duration>=0){var c=this.focusNode||this.domNode,b=(this.baseClass+" "+this["class"]).split(" "),b=m.map(b,
function(a){return a+"Selected"});f.add(c,b);setTimeout(function(){f.remove(c,b)},this.duration)}return e},isFocusable:function(){return!1},buildRendering:function(){if(this.srcNodeRef){if(this._cv){var e=this.srcNodeRef.firstChild;if(e&&e.nodeType===3)e.nodeValue=this._cv(e.nodeValue)}}else this.srcNodeRef=j.create("button",{type:this.type});this.inherited(arguments);this.focusNode=this.domNode},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","_onClick")},_setLabelAttr:function(e){this.inherited(arguments,
[this._cv?this._cv(e):e])}})})},"dojo/query":function(){define("dojo/query",["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],function(m,k,f,j,e,h,l,i){function c(a,b){var c=function(c,d){if(typeof d=="string"&&(d=f.byId(d),!d))return new b([]);var e=typeof c=="string"?a(c,d):c.orphan?c:[c];if(e.orphan)return e;return new b(e)};c.matches=a.match||function(a,b,d){return c.filter([a],b,d).length>0};c.filter=a.filter||function(a,
b,d){return c(b,d).filter(function(b){return e.indexOf(a,b)>-1})};if(typeof a!="function")var d=a.search,a=function(a,b){return d(b||document,a)};return c}k.add("array-extensible",function(){return h.delegate([],{length:1}).length==1&&!k("bug-for-in-skips-shadowed")});var b=Array.prototype,a=b.slice,d=b.concat,n=e.forEach,g=function(b,c,d){c=[0].concat(a.call(c,0));d=d||m.global;return function(a){c[0]=a;return b.apply(d,c)}},o=function(a){var b=this instanceof q&&k("array-extensible");typeof a==
"number"&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=b?this:[],e=d.length=c.length,g=0;g<e;g++)d[g]=c[g];if(b)return d;c=d}h._mixin(c,t);c._NodeListCtor=function(a){return q(a)};return c},q=o,t=q.prototype=k("array-extensible")?[]:{};q._wrap=t._wrap=function(a,b,c){a=new (c||this._NodeListCtor||q)(a);return b?a._stash(b):a};q._adaptAsMap=function(a,b){return function(){return this.map(g(a,arguments,b))}};q._adaptAsForEach=function(a,b){return function(){this.forEach(g(a,
arguments,b));return this}};q._adaptAsFilter=function(a,b){return function(){return this.filter(g(a,arguments,b))}};q._adaptWithCondition=function(a,b,c){return function(){var d=arguments,e=g(a,d,c);if(b.call(c||m.global,d))return this.map(e);this.forEach(e);return this}};n(["slice","splice"],function(a){var c=b[a];t[a]=function(){return this._wrap(c.apply(this,arguments),a=="slice"?this:null)}});n(["indexOf","lastIndexOf","every","some"],function(b){var c=e[b];t[b]=function(){return c.apply(m,[this].concat(a.call(arguments,
0)))}});h.extend(o,{constructor:q,_NodeListCtor:q,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return j(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(){var b=h.isArray(this)?this:a.call(this,0),c=e.map(arguments,function(b){return b&&!h.isArray(b)&&(typeof o!="undefined"&&b.constructor===
o||b.constructor===this._NodeListCtor)?a.call(b,0):b});return this._wrap(d.apply(b,c),this)},map:function(a,b){return this._wrap(e.map(this,a,b),this)},forEach:function(a,b){n(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if(typeof a=="string"){c=u._filterResult(this,b[0]);if(b.length==1)return c._stash(this);d=1}return this._wrap(e.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=h.isFunction(a)?a:h.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},
at:function(){var a=new this._NodeListCtor(0);n(arguments,function(b){b<0&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var u=c(i,o);m.query=c(i,function(a){return o(a)});u.load=function(a,b,d){l.load(a,b,function(a){d(c(a,o))})};m._filterQueryResult=u._filterResult=function(a,b,c){return new o(u.filter(a,b,c))};m.NodeList=u.NodeList=o;return u})},"dojox/mobile/_ScrollableMixin":function(){define("dojox/mobile/_ScrollableMixin",["dojo/_base/kernel","dojo/_base/declare",
"dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dijit/registry","./scrollable"],function(m,k,f,j,e,h,l,i){k=k("dojox.mobile._ScrollableMixin",null,{fixedHeader:"",fixedFooter:"",scrollableParams:null,allowNestedScrolls:!0,constructor:function(){this.scrollableParams={}},destroy:function(){this.cleanup();this.inherited(arguments)},startup:function(){if(!this._started){var c,b=this.scrollableParams;if(this.fixedHeader){c=e.byId(this.fixedHeader);if(c.parentNode==this.domNode)this.isLocalHeader=
!0;b.fixedHeaderHeight=c.offsetHeight}if(this.fixedFooter){c=e.byId(this.fixedFooter);if(c.parentNode==this.domNode)this.isLocalFooter=!0,c.style.bottom="0px";b.fixedFooterHeight=c.offsetHeight}this.init(b);if(this.allowNestedScrolls)for(c=this.getParent();c;c=c.getParent())if(c&&c.scrollableParams){this.dirLock=this.isNested=!0;c.dirLock=!0;break}this.inherited(arguments)}},findAppBars:function(){var c,b,a;c=0;for(b=j.body().childNodes.length;c<b;c++)a=j.body().childNodes[c],this.checkFixedBar(a,
!1);if(this.domNode.parentNode){c=0;for(b=this.domNode.parentNode.childNodes.length;c<b;c++)a=this.domNode.parentNode.childNodes[c],this.checkFixedBar(a,!1)}this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0},checkFixedBar:function(c,b){if(c.nodeType===1){var a=c.getAttribute("fixed")||l.byNode(c)&&l.byNode(c).fixed;if(a==="top"){h.add(c,"mblFixedHeaderBar");if(b)c.style.top="0px",this.fixedHeader=c;return a}else if(a==="bottom")return h.add(c,"mblFixedBottomBar"),this.fixedFooter=
c,a}return null}});f.extend(k,new i(m,dojox));return k})},"dojox/mobile/Switch":function(){define("dojox/mobile/Switch",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/event","dojo/_base/window","dojo/dom-class","dijit/_Contained","dijit/_WidgetBase","./sniff"],function(m,k,f,j,e,h,l,i,c){return f("dojox.mobile.Switch",[i,l],{value:"on",name:"",leftLabel:"ON",rightLabel:"OFF",_width:53,buildRendering:function(){this.domNode=e.doc.createElement("DIV");this._swClass=(this.srcNodeRef&&
this.srcNodeRef.className||this.className||this["class"]||"").replace(/ .*/,"");this.domNode.className="mblSwitch";this.domNode.innerHTML='<div class="mblSwitchInner"><div class="mblSwitchBg mblSwitchBgLeft"><div class="mblSwitchText mblSwitchTextLeft"></div></div><div class="mblSwitchBg mblSwitchBgRight"><div class="mblSwitchText mblSwitchTextRight"></div></div><div class="mblSwitchKnob"></div><input type="hidden"'+(this.name?' name="'+this.name+'"':"")+"></div></div>";var b=this.inner=this.domNode.firstChild;
this.left=b.childNodes[0];this.right=b.childNodes[1];this.knob=b.childNodes[2];this.input=b.childNodes[3]},postCreate:function(){this.connect(this.domNode,"onclick","onClick");this.connect(this.domNode,c("touch")?"touchstart":"onmousedown","onTouchStart");this._initialValue=this.value},_changeState:function(b,a){var c=b==="on";this.left.style.display="";this.right.style.display="";this.inner.style.left="";a&&h.add(this.domNode,"mblSwitchAnimation");h.remove(this.domNode,c?"mblSwitchOff":"mblSwitchOn");
h.add(this.domNode,c?"mblSwitchOn":"mblSwitchOff");var e=this;setTimeout(function(){e.left.style.display=c?"":"none";e.right.style.display=!c?"":"none";h.remove(e.domNode,"mblSwitchAnimation")},a?300:0)},startup:function(){this._swClass.indexOf("Round")!=-1&&this.createRoundMask(this._swClass,Math.round(this.domNode.offsetHeight/2),this.domNode.offsetWidth)},createRoundMask:function(b,a,d){if(c("webkit")&&b){if(!this._createdMasks)this._createdMasks=[];if(!this._createdMasks[b])this._createdMasks[b]=
1,b=e.doc.getCSSCanvasContext("2d",b+"Mask",d,100),b.fillStyle="#000000",b.beginPath(),b.moveTo(a,0),b.arcTo(0,0,0,2*a,a),b.arcTo(0,2*a,a,2*a,a),b.lineTo(d-a,2*a),b.arcTo(d,2*a,d,a,a),b.arcTo(d,0,d-a,0,a),b.closePath(),b.fill()}},onClick:function(){if(!this._moved)this.value=this.input.value=this.value=="on"?"off":"on",this._changeState(this.value,!0),this.onStateChanged(this.value)},onTouchStart:function(b){this._moved=!1;this.innerStartX=this.inner.offsetLeft;if(!this._conn)this._conn=[],this._conn.push(k.connect(this.inner,
c("touch")?"touchmove":"onmousemove",this,"onTouchMove")),this._conn.push(k.connect(this.inner,c("touch")?"touchend":"onmouseup",this,"onTouchEnd"));this.touchStartX=b.touches?b.touches[0].pageX:b.clientX;this.left.style.display="";this.right.style.display="";j.stop(b)},onTouchMove:function(b){b.preventDefault();if(b.targetTouches){if(b.targetTouches.length!=1)return!1;b=b.targetTouches[0].clientX-this.touchStartX}else b=b.clientX-this.touchStartX;var a=this.innerStartX+b;a<=-(this._width-10)&&(a=
-this._width);a>=-10&&(a=0);this.inner.style.left=a+"px";if(Math.abs(b)>10)this._moved=!0},onTouchEnd:function(){m.forEach(this._conn,k.disconnect);this._conn=null;if(this.innerStartX==this.inner.offsetLeft){if(c("touch")){var b=e.doc.createEvent("MouseEvents");b.initEvent("click",!0,!0);this.inner.dispatchEvent(b)}}else if(b=this.inner.offsetLeft<-(this._width/2)?"off":"on",this._changeState(b,!0),b!=this.value)this.value=this.input.value=b,this.onStateChanged(b)},onStateChanged:function(){},_setValueAttr:function(b){this._changeState(b,
!1);if(this.value!=b)this.onStateChanged(b);this.value=this.input.value=b},_setLeftLabelAttr:function(b){this.leftLabel=b;this.left.firstChild.innerHTML=this._cv?this._cv(b):b},_setRightLabelAttr:function(b){this.rightLabel=b;this.right.firstChild.innerHTML=this._cv?this._cv(b):b},reset:function(){this.set("value",this._initialValue)}})})},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(m,k){return m("dijit.form._ToggleButtonMixin",
null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(){var f=this.checked;this._set("checked",!f);var j=this.inherited(arguments);this.set("checked",j?this.checked:f);return j},_setCheckedAttr:function(f,j){this._set("checked",f);k.set(this.focusNode||this.domNode,"checked",f);(this.focusNode||this.domNode).setAttribute(this._aria_attr,f?"true":"false");this._handleOnChange(f,j)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dojo/dom-class":function(){define("dojo/dom-class",
["./_base/lang","./_base/array","./dom"],function(m,k,f){function j(c){if(typeof c=="string"||c instanceof String){if(c&&!h.test(c))return l[0]=c,l;c=c.split(h);c.length&&!c[0]&&c.shift();c.length&&!c[c.length-1]&&c.pop();return c}if(!c)return[];return k.filter(c,function(b){return b})}var e,h=/\s+/,l=[""],i={};return e={contains:function(c,b){return(" "+f.byId(c).className+" ").indexOf(" "+b+" ")>=0},add:function(c,b){var c=f.byId(c),b=j(b),a=c.className,d,a=a?" "+a+" ":" ";d=a.length;for(var e=
0,g=b.length,h;e<g;++e)(h=b[e])&&a.indexOf(" "+h+" ")<0&&(a+=h+" ");d<a.length&&(c.className=a.substr(1,a.length-2))},remove:function(c,b){var c=f.byId(c),a;if(b!==void 0){b=j(b);a=" "+c.className+" ";for(var d=0,e=b.length;d<e;++d)a=a.replace(" "+b[d]+" "," ");a=m.trim(a)}else a="";c.className!=a&&(c.className=a)},replace:function(c,b,a){c=f.byId(c);i.className=c.className;e.remove(i,a);e.add(i,b);c.className!==i.className&&(c.className=i.className)},toggle:function(c,b,a){c=f.byId(c);if(a===void 0)for(var b=
j(b),d=0,h=b.length,g;d<h;++d)g=b[d],e[e.contains(c,g)?"remove":"add"](c,g);else e[a?"add":"remove"](c,b);return a}}})},"dojo/dom-attr":function(){define("dojo/dom-attr",["exports","./_base/sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(m,k,f,j,e,h){function l(b,a){var c=b.getAttributeNode&&b.getAttributeNode(a);return c&&c.specified}var i={innerHTML:1,className:1,htmlFor:0,value:1},c={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};m.has=function(b,a){var d=
a.toLowerCase();return i[h.names[d]||a]||l(j.byId(b),c[d]||a)};m.get=function(b,a){var b=j.byId(b),d=a.toLowerCase(),e=h.names[d]||a,g=i[e];value=b[e];if(g&&typeof value!="undefined")return value;if(e!="href"&&(typeof value=="boolean"||f.isFunction(value)))return value;d=c[d]||a;return l(b,d)?b.getAttribute(d):null};m.set=function(b,a,d){b=j.byId(b);if(arguments.length==2){for(var l in a)m.set(b,l,a[l]);return b}l=a.toLowerCase();var g=h.names[l]||a,k=i[g];if(g=="style"&&typeof d!="string")return e.set(b,
d),b;if(k||typeof d=="boolean"||f.isFunction(d))return h.set(b,a,d);b.setAttribute(c[l]||a,d);return b};m.remove=function(b,a){j.byId(b).removeAttribute(c[a.toLowerCase()]||a)};m.getNodeProp=function(b,a){var b=j.byId(b),d=a.toLowerCase(),e=h.names[d]||a;if(e in b&&e!="href")return b[e];d=c[d]||a;return l(b,d)?b.getAttribute(d):null}})},"dojox/mobile/TabBar":function(){define("dojox/mobile/TabBar",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style",
"dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./Heading","./TabBarButton"],function(m,k,f,j,e,h,l,i,c,b){return k("dojox.mobile.TabBar",[c,i,l],{iconBase:"",iconPos:"",barType:"tabBar",inHeading:!1,tag:"UL",_fixedButtonWidth:76,_fixedButtonMargin:17,_largeScreenWidth:500,buildRendering:function(){this._clsName=this.barType=="segmentedControl"?"mblTabButton":"mblTabBarButton";this.domNode=this.containerNode=this.srcNodeRef||j.create(this.tag);this.domNode.className=this.barType=="segmentedControl"?
"mblTabPanelHeader":"mblTabBar"},startup:function(){this._started||(this.inherited(arguments),this.resize())},resize:function(a){var c;a&&a.w?(e.setMarginBox(this.domNode,a),c=a.w):c=h.get(this.domNode,"position")==="absolute"?e.getContentBox(this.domNode).w:e.getMarginBox(this.domNode).w;for(var l=this._fixedButtonWidth,g=this._fixedButtonMargin,i=this.containerNode.childNodes,j=[],a=0;a<i.length;a++){var k=i[a];k.nodeType==1&&f.contains(k,this._clsName)&&j.push(k)}if(this.barType=="segmentedControl"){i=
c;for(a=c=0;a<j.length;a++)i-=e.getMarginBox(j[a]).w,c+=j[a].offsetWidth;i=Math.floor(i/2);a=this.getParent();a=this.inHeading||a instanceof b;this.containerNode.style.padding=(a?0:3)+"px 0px 0px "+(a?0:i)+"px";a&&h.set(this.domNode,{background:"none",border:"none",width:c+2+"px"});f.add(this.domNode,"mblTabBar"+(a?"Head":"Top"))}else if(i=Math.floor((c-(l+g*2)*j.length)/2),c<this._largeScreenWidth||i<0){for(a=0;a<j.length;a++)j[a].style.width=Math.round(98/j.length)+"%",j[a].style.margin="0px";this.containerNode.style.padding=
"0px 0px 0px 1%"}else{for(a=0;a<j.length;a++)j[a].style.width=l+"px",j[a].style.margin="0 "+g+"px";if(j.length>0)j[0].style.marginLeft=i+g+"px";this.containerNode.style.padding="0px"}m.some(this.getChildren(),function(a){return a.iconNode1})?f.remove(this.domNode,"mblTabBarNoIcons"):f.add(this.domNode,"mblTabBarNoIcons");m.some(this.getChildren(),function(a){return a.label})?f.remove(this.domNode,"mblTabBarNoText"):f.add(this.domNode,"mblTabBarNoText")}})})},"app/views/TaskList":function(){define("app/views/TaskList",
["dojo/_base/declare","dojo/on","dijit/registry","dojox/mobile/RadioButton","dojox/mobile/Button","dojox/mobile/RoundRect","dojox/mobile/ListItem","dojo/dom-construct","dojo/dom","dojo/_base/lang","dojo/_base/xhr","app/views/Map","dojo/dom-attr","dojo/dom-geometry","dojo/query","dojo/_base/event","dojo/_base/Deferred","dojox/gesture/tap"],function(m,k,f,j,e,h,l,i,c,b,a,d,n,g,o,q,t){return m("app.views.TaskList",null,{taskWidgetsClasswide:[],activityScore:null,tasksAndTriesMap:null,identifier:null,
tITLE_DOM_ID:"taskListViewTitle",view:null,imageNode:null,titleNode:null,taskData:null,taskList:null,WALK_RADIUS:20,VISIT_RADIUS:100,taskIcons:{MULTIPLE_CHOICE:"/img/taskIcons/question.png",PICTURE:"/img/taskIcons/camera.png",VISIT:"/img/taskIcons/camera.png",ACTION:"/img/taskIcons/location.png"},taskCompletedIcons:{MULTIPLE_CHOICE:"/img/taskIcons/question_done.png",PICTURE:"/img/taskIcons/camera_done.png",VISIT:"/img/taskIcons/camera.png",ACTION:"/img/taskIcons/location_done.png"},constructor:function(a,
b){this.activityScore=0;this.tasksAndTriesMap={};this.view=a;this.activityData=b;this.taskList=f.byId("taskList");localStorage.setItem("activityDetails_"+b.id,dojo.toJson(b));console.debug(b.tasks.length);var c=parseInt(localStorage.getItem("itemsViewed"));localStorage.setItem("itemsViewed",c+b.tasks.length)},addToGlobalAccumulatedPoints:function(a){var b=parseInt(localStorage.getItem("pointsAccumulated"));localStorage.setItem("pointsAccumulated",b+a)},createLockAnswerFunction:function(a,b,d,e,g){q.stop(g);
console.debug("the current total is:",this.activityScore);a===b?(a=parseInt(localStorage.getItem("itemsFinished")),localStorage.setItem("itemsFinished",a+1),this.tasksAndTriesMap[d]?(this.activityScore+=Math.round(100/(this.tasksAndTriesMap[d]+1)),this.addToGlobalAccumulatedPoints(Math.round(100/(this.tasksAndTriesMap[d]+1)))):(this.activityScore+=100,this.addToGlobalAccumulatedPoints(100)),console.debug("correct! your new total is ",this.activityScore),this.activityData.tasks[e].completed=!0,d=f.byId(""+
d),o(".taskDetails",d.domNode),this.setTaskDisplayToCompleted(b,d)):(this.activityData.tasks[e].question.givenWrongAnswers?this.activityData.tasks[e].question.givenWrongAnswers.push(a):this.activityData.tasks[e].question.givenWrongAnswers=[a],this.tasksAndTriesMap[d]?this.tasksAndTriesMap[d]++:this.tasksAndTriesMap[d]=1,this.setTaskDisplayToWrong(c.byId(""+d+"_"+a).parentNode,a));return!1},setTaskDisplayToCompleted:function(a,b){var c=o(".taskDetails",b.domNode)[0];n.set(c,"innerHTML",'<img src="/img/customIcons/correct.png"/><span style="margin-left: 5%">'+
a+"</span>");n.set(c,"style","color:green; vertical-align:middle;");b.set("rightIcon2","mblDomButtonGreenCircleDownArrow");b.completed=!0},setTaskDisplayToWrong:function(a,b){n.set(a,"innerHTML",'<img src="/img/customIcons/errorSmall.png"/><span style="margin-left: 5%">'+b+"</span>");n.set(a,"style","color:red;")},populateData:function(){var a=this.activityData;this.identifier=this.activityData.title;if(!this.titleNode)this.titleNode=c.byId(this.tITLE_DOM_ID);this.titleNode.innerHTML=a.title;this.taskList.destroyDescendants();
for(var b=this,d=0;d<a.tasks.length;d++){var e=a.tasks[d],g=new l({id:e.id,label:e.headline,noArrow:!0,icon:this.taskIcons[e.type],variableHeight:!0,rightIcon2:"mblDomButtonSilverCircleDownArrow",variableHeight:!0,clickable:!0,onClick:function(c){var d=new Date;if(d-b.lastClickTime<500)return console.log("returning early ",d-b.lastClickTime),!1;q.stop(c);b.lastClickTime=d;for(c=0;c<a.tasks.length;c++)this.id!=a.tasks[c].id?(b._hideTaskDetails(a.tasks[c]),console.log("hide",this)):(b._showTaskDetails(a.tasks[c],
c),console.log("show",a.tasks[c].id))}});g.doneIcon=this.taskCompletedIcons[e.type];this.taskList.addChild(g)}},_showTaskDetails:function(a,b){var c=f.byId(""+a.id),c=o(".mblListItemTextBox",c.domNode)[0];if(c.childNodes.length>1)this._hideTaskDetails(a);else{var d=i.create("div",{"class":"taskDetails"});i.place(d,c,"last");a.type==="MULTIPLE_CHOICE"?this._createQuestionOptions(a,b):a.type==="PICTURE"?this._createCameraDetails(a,b):a.type==="ACTION"?this._createWalkDetails(a,b):this._createVisitDetails(a,
b)}},_hideTaskDetails:function(a){var b=f.byId(""+a.id),b=o(".taskDetails",b.domNode);b.length!=0&&(this._destroyTaskDetails(a),i.destroy(b[0]))},_createQuestionOptions:function(a,c){var d=f.byId(""+a.id),e=o(".taskDetails",d.domNode)[0];this.activityData.tasks[c].completed?this.setTaskDisplayToCompleted(this.activityData.tasks[c].question.correctAnswer,d):dojo.forEach(a.question.options,b.hitch(this,function(d){var g=i.create("div",{"class":"questionOption"}),f=this.activityData.tasks[c].question.givenWrongAnswers;
if(f&&f.indexOf(d)>=0)this.setTaskDisplayToWrong(g,d),i.place(g,e,"last");else{f=new j({name:""+a.id,id:""+a.id+"_"+d});i.place(f.domNode,g,"last");var h=i.create("label");n.set(h,"innerHTML",d);n.set(h,"for",""+a.id+"_"+d);i.place(h,g);i.place(g,e);k(f.domNode,"click",b.hitch(this,this.createLockAnswerFunction,d,a.question.correctAnswer,a.id,c))}}))},_createCameraDetails:function(){console.error("not implemented yet")},_createWalkDetails:function(a,c){var d=f.byId(""+a.id),g=o(".taskDetails",d.domNode)[0];
this.activityData.tasks[c].completed?this.setTaskDisplayToCompleted("walk completed",d):dojo.forEach(["start","end"],b.hitch(this,function(a,c){var d=i.create("div",{"class":"checkpoint"});if(a.walk[c].reached)i.place("<div class='reached'>Reached "+c+" checkpoint </div>",d);else{var h=new e({label:"Verify I am at "+c+" location",onClick:b.hitch(this,function(a,c,e){q.stop(e);this.checkLocationProximity(a,a.walk[c].location.coordinates,this.WALK_RADIUS).then(b.hitch(this,function(b){b.result?(i.empty(d),
i.place("<div class='reached'>Reached "+b.type+" checkpoint </div>",d),a.walk[c].reached=!0,a.walk.start.reached&&a.walk.end.reached&&(alert("Task completed!"),this.setTaskDisplayToCompleted("Walk Completed",f.byId(""+a.id)))):alert("Not there yet!")}),function(a){console.error("request to check proximity failed ",a)})},a,c)});i.place(h.domNode,d)}i.place(d,g)},a))},_createVisitDetails:function(a){var c=f.byId(""+a.id),c=o(".taskDetails",c.domNode)[0],d=i.create("div",{"class":"checkpoint"});a.reached?
i.place("<div class='reached'>Visited location</div>",d):(a=new e({label:"Verify I am at location",onClick:b.hitch(this,function(a,c){q.stop(c);this.checkLocationProximity(a,a.location.coordinates,this.VISIT_RADIUS).then(b.hitch(this,function(b){b.result?(i.empty(d),a.reached=!0,alert("Task completed!"),this.setTaskDisplayToCompleted("Visited location",f.byId(""+a.id))):alert("Not there yet!")}),function(a){console.error("request to check proximity failed ",a)})},a)}),i.place(a.domNode,d));i.place(d,
c)},_destroyTaskDetails:function(a){for(var a=f.byId(""+a.id),a=f.findWidgets(a.domNode),b=0;b<a.length;b++)a[b].destroy()},checkLocationProximity:function(b,c,d){var e=new t,g=new t;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(a){e.resolve(a.coords)});else return console.log("navigator not supported"),!1;e.then(function(b){var e=c[0]+" "+c[1],b=b.longitude+" "+b.latitude;return a.get({url:"/TreasureHuntWeb/rest/game/proximity/"+e+"/"+b,content:{radius:d},handleAs:"json",
load:function(a){g.resolve({result:a})}})});return g},show:function(){this.populateData();this.view.show()},destroy:function(){localStorage.removeItem("activityDetails_"+this.identifier);this.taskWidgetsClasswide=[];this.identifier=this.tasksAndTriesMap=this.activityScore=null;this.view.destroy();this.activityData=this.titleNode=this.imageNode=null},_showMapView:function(){viewCache.mapView.populateData(this);viewCache.mapView.show()}})})},"dojo/selector/lite":function(){define("dojo/selector/lite",
["../has","../_base/kernel"],function(m,k){var f=document.createElement("div"),j=f.matchesSelector||f.webkitMatchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector,e=f.querySelectorAll;m.add("dom-matches-selector",!!j);m.add("dom-qsa",!!e);var h=function(b,a){if(c&&b.indexOf(",")>-1)return c(b,a);var d=(e?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(b),a=a||document;if(d){if(d[2]){var f=k.byId?k.byId(d[2]):
document.getElementById(d[2]);if(!f||d[1]&&d[1]!=f.tagName.toLowerCase())return[];if(a!=document)for(var g=f;g!=a;)if(g=g.parentNode,!g)return[];return d[3]?h(d[3],f):[f]}if(d[3]&&a.getElementsByClassName)return a.getElementsByClassName(d[4]);if(d[5])if(f=a.getElementsByTagName(d[5]),d[4]||d[6])b=(d[4]||"")+d[6];else return f}if(e)return a.nodeType===1&&a.nodeName.toLowerCase()!=="object"?l(a,b,a.querySelectorAll):a.querySelectorAll(b);else f||(f=a.getElementsByTagName("*"));for(var d=[],g=0,j=f.length;g<
j;g++){var m=f[g];m.nodeType==1&&i(m,b,a)&&d.push(m)}return d},l=function(b,a,c){var e=b,g=b.getAttribute("id"),f=g||"__dojo__",h=b.parentNode,i=/^\s*[+~]/.test(a);if(i&&!h)return[];g?f=f.replace(/'/g,"\\$&"):b.setAttribute("id",f);if(i&&h)b=b.parentNode;try{return c.call(b,"[id='"+f+"'] "+a)}finally{g||e.removeAttribute("id")}};if(!m("dom-matches-selector"))var i=function(){function b(a){a=a[i]();return function(b){return b.tagName==a}}function a(a){var b=" "+a+" ";return function(c){return c.className.indexOf(a)>
-1&&(" "+c.className+" ").indexOf(b)>-1}}function c(a,b,d){b.match(/['"]/)&&(b=eval(b));var e=j[d||""];return function(c){return(c=c.getAttribute(a))&&e(c,b)}}function e(a){return function(b,c){for(;(b=b.parentNode)!=c;)if(a(b,c))return!0}}function g(a){return function(b,c){b=b.parentNode;return a?b!=c&&a(b,c):b==c}}function h(a,b){return a?function(c,d){return b(c)&&a(c,d)}:b}var i=f.tagName=="div"?"toLowerCase":"toUpperCase",j={"^=":function(a,b){return a.indexOf(b)==0},"*=":function(a,b){return a.indexOf(b)>
-1},"$=":function(a,b){return a.substring(a.length-b.length,a.length)==b},"~=":function(a,b){return(" "+a+" ").indexOf(" "+b+" ")>-1},"|=":function(a,b){return(a+"-").indexOf(b+"-")==0},"=":function(a,b){return a==b},"":function(){return!0}},l={};return function(f,i,j){var k=l[i];if(!k){if(i.replace(/(?:\s*([> ])\s*)|(\.)?([\w-]+)|\[([\w-]+)\s*(.?=)?\s*([^\]]*)\]/g,function(f,i,j,l,m,p,q){l?k=j=="."?h(k,a(l)):h(k,b(l)):i?k=(i==" "?e:g)(k):m&&(k=h(k,c(m,q,p)));return""}))throw Error("Syntax error in query");
if(!k)return!0;l[i]=k}return k(f,j)}}();if(!m("dom-qsa"))var c=function(b,a){for(var b=b.split(/\s*,\s*/),c=[],e=0;e<b.length;e++)for(var g=h(b[e],a),f=0,i=g.length;f<i;f++){var j=g[f];c[j.sourceIndex]=j}g=[];for(e in c)g.push(c[e]);return g};h.match=j?function(b,a,c){if(c)return l(c,a,function(a){return j.call(b,a)});return j.call(b,a)}:i;return h})},"dojox/mobile/RoundRect":function(){define("dojox/mobile/RoundRect",["dojo/_base/array","dojo/_base/declare","dojo/_base/window","dijit/_Contained",
"dijit/_Container","dijit/_WidgetBase"],function(m,k,f,j,e,h){return k("dojox.mobile.RoundRect",[h,e,j],{shadow:!1,buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||f.doc.createElement("DIV");this.domNode.className=this.shadow?"mblRoundRect mblShadow":"mblRoundRect"},resize:function(){m.forEach(this.getChildren(),function(e){e.resize&&e.resize()})}})})},"dojox/mobile/TabBarButton":function(){define("dojox/mobile/TabBarButton",["dojo/_base/declare","dojo/_base/lang","dojo/_base/window",
"dojo/dom-class","dojo/dom-construct","dijit/registry","./common","./_ItemBase"],function(m,k,f,j,e,h,l,i){return m("dojox.mobile.TabBarButton",i,{icon1:"",icon2:"",iconPos1:"",iconPos2:"",selected:!1,transition:"none",tag:"LI",selectOne:!0,inheritParams:function(){if(this.icon&&!this.icon1)this.icon1=this.icon;var c=this.getParent();if(c){if(!this.transition)this.transition=c.transition;if(this.icon1&&c.iconBase&&c.iconBase.charAt(c.iconBase.length-1)==="/")this.icon1=c.iconBase+this.icon1;if(!this.icon1)this.icon1=
c.iconBase;if(!this.iconPos1)this.iconPos1=c.iconPos;if(this.icon2&&c.iconBase&&c.iconBase.charAt(c.iconBase.length-1)==="/")this.icon2=c.iconBase+this.icon2;if(!this.icon2)this.icon2=c.iconBase||this.icon1;if(!this.iconPos2)this.iconPos2=c.iconPos||this.iconPos1}},buildRendering:function(){var c=this.anchorNode=e.create("A",{className:"mblTabBarButtonAnchor"});this.connect(c,"onclick","onClick");var b=this.box=e.create("DIV",{className:"mblTabBarButtonTextBox"},c),a="",d=this.srcNodeRef;if(d)for(var f=
0,g=d.childNodes.length;f<g;f++){var h=d.firstChild;h.nodeType===3&&(a+=k.trim(h.nodeValue));b.appendChild(h)}if(!this.label)this.label=a;this.containerNode=this.domNode=this.srcNodeRef||e.create(this.tag);this.domNode.appendChild(c);this.domNode.className.indexOf("mblDomButton")!=-1&&(c=e.create("DIV",null,c),l.createDomButton(this.domNode,null,c),j.add(this.domNode,"mblTabButtonDomButton"),j.add(c,"mblTabButtonDomButtonClass"));(this.icon1||this.icon).indexOf("mblDomButton")!=-1&&j.add(this.domNode,
"mblTabButtonDomButton")},startup:function(){if(!this._started){this.inheritParams();var c=this.getParent();j.add(this.domNode,(c?c._clsName:"mblTabBarButton")+(this.selected?" mblTabButtonSelected":""));if(c&&c.barType=="segmentedControl")j.remove(this.domNode,"mblTabBarButton"),j.add(this.domNode,c._clsName),this.box.className="";this.set({icon1:this.icon1,icon2:this.icon2});this.inherited(arguments)}},select:function(c){if(c)this.selected=!1,j.remove(this.domNode,"mblTabButtonSelected");else{this.selected=
!0;j.add(this.domNode,"mblTabButtonSelected");for(var c=0,b=this.domNode.parentNode.childNodes;c<b.length;c++)if(b[c].nodeType==1){var a=h.byNode(b[c]);a&&a!=this&&a.deselect()}}if(this.iconNode1)this.iconNode1.style.visibility=this.selected?"hidden":"";if(this.iconNode2)this.iconNode2.style.visibility=this.selected?"":"hidden"},deselect:function(){this.select(!0)},onClick:function(){this.defaultClickAction()},_setIcon:function(c,b,a,d){var f="iconNode"+a,g="iconPos"+a;c&&(this["icon"+a]=c);if(b){if(this[g]===
b)return;this[g]=b}if(c&&c!=="none"){if(!this.iconDivNode)this.iconDivNode=e.create("DIV",{className:"mblTabBarButtonDiv"},this.anchorNode,"first");this[f]?e.empty(this[f]):this[f]=e.create("div",{className:"mblTabBarButtonIcon"},this.iconDivNode);l.createIcon(c,this[g],null,this.alt,this[f]);this[g]&&j.add(this[f].firstChild,"mblTabBarButtonSpriteIcon");j.remove(this.iconDivNode,"mblTabBarButtonNoIcon");this[f].style.visibility=d?"hidden":""}else this.iconDivNode&&j.add(this.iconDivNode,"mblTabBarButtonNoIcon")},
_setIcon1Attr:function(c){this._setIcon(c,null,1,this.selected)},_setIcon2Attr:function(c){this._setIcon(c,null,2,!this.selected)},_setIconPos1Attr:function(c){this._setIcon(null,c,1,this.selected)},_setIconPos2Attr:function(c){this._setIcon(null,c,2,!this.selected)},_setLabelAttr:function(c){this.label=c;this.box.innerHTML=this._cv?this._cv(c):c}})})},"dojox/mobile/CheckBox":function(){define("dojox/mobile/CheckBox",["dojo/_base/declare","dojo/dom-construct","dijit/form/_CheckBoxMixin","./ToggleButton"],
function(m,k,f,j){return m("dojox.mobile.CheckBox",[j,f],{baseClass:"mblCheckBox",_setTypeAttr:function(){},buildRendering:function(){if(!this.srcNodeRef)this.srcNodeRef=k.create("input",{type:this.type});this.inherited(arguments);this.focusNode=this.domNode},_getValueAttr:function(){return this.checked?this.value:!1}})})},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(m,k,f,j){return m("dijit.form._ButtonMixin",
null,{label:"",type:"button",_onClick:function(e){if(this.disabled)return f.stop(e),!1;var h=this.onClick(e)===!1;if(!h&&this.type=="submit"&&!(this.valueNode||this.focusNode).form)for(var l=this.domNode;l.parentNode;l=l.parentNode){var i=j.byNode(l);if(i&&typeof i._onSubmit=="function"){i._onSubmit(e);h=!0;break}}h&&e.preventDefault();return!h},postCreate:function(){this.inherited(arguments);k.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",
e);(this.containerNode||this.focusNode).innerHTML=e}})})},"dojox/mobile/RoundRectCategory":function(){define("dojox/mobile/RoundRectCategory",["dojo/_base/declare","dojo/_base/window","dijit/_Contained","dijit/_WidgetBase"],function(m,k,f,j){return m("dojox.mobile.RoundRectCategory",[j,f],{label:"",buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||k.doc.createElement("H2");this.domNode.className="mblRoundRectCategory";if(!this.label)this.label=this.domNode.innerHTML},_setLabelAttr:function(e){this.label=
e;this.domNode.innerHTML=this._cv?this._cv(e):e}})})},"dojox/mobile/transition":function(){define("dojox/mobile/transition",["dojo/_base/Deferred","dojo/_base/config"],function(m,k){if(k.mblCSS3Transition){var f=new m;require([k.mblCSS3Transition],function(j){f.resolve(j)});return f}return null})},"dojox/mobile/ToggleButton":function(){define("dojox/mobile/ToggleButton",["dojo/_base/declare","dojo/dom-class","dijit/form/_ToggleButtonMixin","./Button"],function(m,k,f,j){return m("dojox.mobile.ToggleButton",
[j,f],{baseClass:"mblToggleButton",_setCheckedAttr:function(){this.inherited(arguments);var e=(this.baseClass+" "+this["class"]).replace(/(\S+)\s*/g,"$1Checked ").split(" ");k[this.checked?"add":"remove"](this.focusNode||this.domNode,e)}})})},"dojo/window":function(){define("dojo/window",["./_base/kernel","./_base/lang","./_base/sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(m,k,f,j,e,h){k.getObject("window",!0,m);m.window.getBox=function(){var e=j.doc.compatMode=="BackCompat"?
j.body():j.doc.documentElement,f=h.docScroll(),c=j.doc.parentWindow||j.doc.defaultView;return{l:f.x,t:f.y,w:c.innerWidth||e.clientWidth,h:c.innerHeight||e.clientHeight}};m.window.get=function(e){return e.parentWindow||e.defaultView};m.window.scrollIntoView=function(l,i){try{var l=e.byId(l),c=l.ownerDocument||j.doc,b=c.body||j.body(),a=c.documentElement||b.parentNode,d=f("webkit");if((!f("mozilla")&&!d&&!f("opera")||l==b||l==a)&&typeof l.scrollIntoView!="undefined")l.scrollIntoView(!1);else for(var k=
c.compatMode=="BackCompat"?b:a,c=d?b:k,g=k.clientWidth,m=k.clientHeight,q=!h.isBodyLtr(),t=i||h.position(l),u=l.parentNode;u;){u==b&&(u=c);var p=h.position(u);if(u==c)p.w=g,p.h=m,p.x=0,p.y=0;else{var r=h.getPadBorderExtents(u);p.w-=r.w;p.h-=r.h;p.x+=r.l;p.y+=r.t;var s=u.clientWidth,B=p.w-s;if(s>0&&B>0)p.w=s,p.x+=q&&u.clientLeft>r.l?B:0;s=u.clientHeight;B=p.h-s;if(s>0&&B>0)p.h=s}var v=t.x-p.x,z=t.y-Math.max(p.y,0),G=v+t.w-p.w,M=z+t.h-p.h;if(G*v>0){var N=Math[v<0?"max":"min"](v,G);t.x+=u.scrollLeft;
u.scrollLeft+=N;t.x-=u.scrollLeft}M*z>0&&(t.y+=u.scrollTop,u.scrollTop+=Math[z<0?"max":"min"](z,M),t.y-=u.scrollTop);u=u!=c&&u.parentNode}}catch(O){console.error("scrollIntoView: "+O),l.scrollIntoView(!1)}};return m.window})},"dojox/mobile/Tooltip":function(){define("dojox/mobile/Tooltip",["dojo/_base/array","dijit/registry","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/place","dijit/_WidgetBase"],function(m,k,f,j,e,h,l,i,
c,b){return f("dojox.mobile.Tooltip",b,{baseClass:"mblTooltip mblTooltipHidden",buildRendering:function(){this.inherited(arguments);this.anchor=h.create("div",{"class":"mblTooltipAnchor"},this.domNode,"first");this.arrow=h.create("div",{"class":"mblTooltipArrow"},this.anchor);this.innerArrow=h.create("div",{"class":"mblTooltipInnerArrow"},this.anchor)},show:function(a,b){var f=this.domNode;e.remove(f,["mblTooltipAfter","mblTooltipBefore","mblTooltipBelow","mblTooltipAbove"]);m.forEach(k.findWidgets(f),
function(a){if(a.height=="auto"&&typeof a.resize=="function"){if(!a.fixedFooterHeight)a.fixedFooterHeight=l.getPadBorderExtents(f).b;a.resize()}});var g=c.around(f,a,b||["below-centered","above-centered","after","before"],this.isLeftToRight()),h={MRM:"mblTooltipAfter",MLM:"mblTooltipBefore",BMT:"mblTooltipBelow",TMB:"mblTooltipAbove",BLT:"mblTooltipBelow",TLB:"mblTooltipAbove",BRT:"mblTooltipBelow",TRB:"mblTooltipAbove",TLT:"mblTooltipBefore",TRT:"mblTooltipAfter",BRB:"mblTooltipAfter",BLB:"mblTooltipBefore"}[g.corner+
g.aroundCorner.charAt(0)]||"";e.add(f,h);var q=l.position(a,!0);i.set(this.anchor,h=="mblTooltipAbove"||h=="mblTooltipBelow"?{top:"",left:Math.max(0,q.x-g.x+(q.w>>1)-(this.arrow.offsetWidth>>1))+"px"}:{left:"",top:Math.max(0,q.y-g.y+(q.h>>1)-(this.arrow.offsetHeight>>1))+"px"});e.replace(f,"mblTooltipVisible","mblTooltipHidden");this.resize=j.hitch(this,"show",a,b);return g},hide:function(){this.resize=void 0;e.replace(this.domNode,"mblTooltipHidden","mblTooltipVisible")},onBlur:function(){return!0},
destroy:function(){if(this.anchor)this.anchor.removeChild(this.innerArrow),this.anchor.removeChild(this.arrow),this.domNode.removeChild(this.anchor),this.anchor=this.arrow=this.innerArrow=void 0;this.inherited(arguments)}})})},"dojox/mobile/EdgeToEdgeList":function(){define("dojox/mobile/EdgeToEdgeList",["dojo/_base/declare","./RoundRectList"],function(m,k){return m("dojox.mobile.EdgeToEdgeList",k,{buildRendering:function(){this.inherited(arguments);this.domNode.className="mblEdgeToEdgeList"}})})},
"dojox/mobile/uacss":function(){define("dojox/mobile/uacss",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","dojox/mobile/sniff"],function(m,k,f,j){f.doc.documentElement.className+=k.trim([j("bb")?"dj_bb":"",j("android")?"dj_android":"",j("iphone")?"dj_iphone":"",j("ipod")?"dj_ipod":"",j("ipad")?"dj_ipad":""].join(" ").replace(/ +/g," "));return m})},"dijit/form/_RadioButtonMixin":function(){define("dijit/form/_RadioButtonMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr",
"dojo/_base/event","dojo/_base/lang","dojo/query","dojo/_base/window","../registry"],function(m,k,f,j,e,h,l,i){return k("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var c=[];h("input[type=radio]",this.focusNode.form||l.doc).forEach(e.hitch(this,function(b){b.name==this.name&&b.form==this.focusNode.form&&(b=i.getEnclosingWidget(b))&&c.push(b)}));return c},_setCheckedAttr:function(c){this.inherited(arguments);this._created&&c&&m.forEach(this._getRelatedWidgets(),e.hitch(this,
function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_onClick:function(c){if(this.checked||this.disabled)return j.stop(c),!1;if(this.readOnly)return j.stop(c),m.forEach(this._getRelatedWidgets(),e.hitch(this,function(b){f.set(this.focusNode||this.domNode,"checked",b.checked)})),!1;return this.inherited(arguments)}})})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr",
"dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./registry"],function(m,k,f,j,e,h,l,i,c,b,a,d,n,g,o,q,t,u,p,r){function s(a){return function(b){i[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}n.isAsync||q(0,function(){m(["dijit/_base/manager"])});var B={};return h("dijit._WidgetBase",t,{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:s("lang"),dir:"",_setDirAttr:s("dir"),
textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{},_blankGif:j.blankGif||m.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=l.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(a)this.params=a,g.mixin(this,a);this.postMixInProperties();
if(!this.id)this.id=r.getUniqueId(this.declaredClass.replace(/\./g,"_"));r.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&c.parentNode.replaceChild(this.domNode,c)}this.domNode&&this.domNode.setAttribute("widgetId",this.id);this.postCreate();this.srcNodeRef&&!this.srcNodeRef.parentNode&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=
[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,d;for(d in a)d in this.attributeMap||"_set"+d.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(d)}k.forEach(b,function(a){this.params&&a in this.params||this[a]&&this.set(a,this[a])},this);for(var e in this.params)this.set(e,this[e])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||b.create("div");if(this.baseClass){var a=this.baseClass.split(" ");
this.isLeftToRight()||(a=a.concat(k.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,k.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&g.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){this._beingDestroyed=!0;this.uninitialize();for(var b;b=this._connects.pop();)b.remove();
for(;b=this._supportingWidgets.pop();)b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy();this.destroyRendering(a);r.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?i.remove(this.domNode,"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){k.forEach(this.getChildren(),function(b){b.destroyRecursive&&
b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;g.isObject(a)?d.set(b,a):b.style.cssText?b.style.cssText+="; "+a:b.style.cssText=a;this._set("style",a)},_attrToDom:function(a,b,d){d=arguments.length>=3?d:this.attributeMap[a];k.forEach(g.isArray(d)?d:[d],function(d){var e=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":g.isFunction(b)&&(b=g.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():
a;i.set(e,d,b);break;case "innerText":e.innerHTML="";e.appendChild(p.doc.createTextNode(b));break;case "innerHTML":e.innerHTML=b;break;case "class":c.replace(e,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if(typeof a==="object"){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(g.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!g.isFunction(this.focusNode)?
"focusNode":"domNode",f=this[d].tagName,h;if(!(h=B[f])){h=this[d];var i={},j;for(j in h)i[j.toLowerCase()]=!0;h=B[f]=i}j=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:c.l in h&&typeof b!="function"||/^aria-|^data-|^role$/.test(a)?d:null;j!=null&&this._attrToDom(a,b,j);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});
return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._watchCallbacks&&this._created&&b!==c&&this._watchCallbacks(a,c,b)},on:function(a,b){return f.after(this,this._onMap(a),b,!0)},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c[a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||
"NO ID")+"]"},getChildren:function(){return this.containerNode?r.findWidgets(this.containerNode):[]},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){a=e.connect(a,b,this,c);this._connects.push(a);return a},disconnect:function(a){var b=k.indexOf(this._connects,a);b!=-1&&(a.remove(),this._connects.splice(b,1))},subscribe:function(a,b){var c=u.subscribe(a,g.hitch(this,b));this._connects.push(c);return c},unsubscribe:function(a){this.disconnect(a)},isLeftToRight:function(){return this.dir?
this.dir=="ltr":a.isBodyLtr()},isFocusable:function(){return this.focus&&d.get(this.domNode,"display")!="none"},placeAt:function(a,c){a.declaredClass&&a.addChild?a.addChild(this,c):b.place(this.domNode,a,c);return this},getTextDir:function(a,b){return b},applyTextDir:function(){}})})}}});define("app/main",[],1);